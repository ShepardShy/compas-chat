{
  "resolvedId": "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue?vue&type=style&index=0&scoped=b064cf09&lang.scss",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "\r\n@use '~/assets/styles/_variables.scss' as variables;\r\n\r\n.audio-msg {\r\n  padding: 10px 15px;\r\n  background-color: #f7f8fa;\r\n  position: relative;\r\n}\r\n\r\n.audio-msg__body {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.audio-msg__btn {\r\n  flex: 0 0 40px;\r\n  width: 40px;\r\n  height: 40px;\r\n  margin: 0 15px 0 0;\r\n  padding: 11.7px 10.1px 11.7px 13.8px;\r\n  background-color: #8babd8;\r\n  border-radius: 40px;\r\n  cursor: pointer;\r\n  transition: 0.2s all;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.audio-msg__btn:active {\r\n  opacity: 0.7;\r\n}\r\n\r\n.audio-msg__triangle {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-top: 9px solid transparent;\r\n  border-left: 16px solid variables.$color-white;\r\n  border-bottom: 9px solid transparent;\r\n  border-radius: 2px;\r\n}\r\n\r\n.audio-msg__pause {\r\n  position: relative;\r\n}\r\n\r\n.audio-msg__pause:before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -8px;\r\n  width: 4px;\r\n  height: 16px;\r\n  border-radius: 2px;\r\n  background-color: variables.$color-white;\r\n}\r\n\r\n.audio-msg__pause:after {\r\n  content: '';\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 4px;\r\n  width: 4px;\r\n  height: 16px;\r\n  border-radius: 2px;\r\n  background-color: variables.$color-white;\r\n}\r\n\r\n.audio-msg__time-status {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 5px;\r\n}\r\n\r\n.audioPlayer {\r\n\r\n}\r\n\r\n.audio-msg__columns {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 20px;\r\n  width: 220px;\r\n  margin-bottom: 9px;\r\n}\r\n\r\n.audio-msg__info {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.audio-msg__length,\r\n.audio-msg__weight {\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  color: #8babd8;\r\n}\r\n\r\n.audio-msg__delete {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 5px;\r\n  background-color: variables.$color-white;\r\n  box-shadow: 0 0 3px 0 variables.$color-black;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid variables.$color-light-grey;\r\n  cursor: pointer;\r\n  transition: 0.2s scale;\r\n}\r\n\r\n.audio-msg__delete-icon {\r\n  color: variables.$color-red;\r\n}\r\n\r\n.audio-msg__delete:hover {\r\n  scale: 1.1;\r\n}\r\n",
      "start": 1709273111798,
      "end": 1709273111798,
      "sourcemaps": {
        "version": 3,
        "sources": [
          "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue"
        ],
        "names": [],
        "mappings": "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",
        "file": "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue",
        "sourceRoot": "",
        "sourcesContent": [
          "<script setup lang=\"ts\">\r\nimport ReceivedIcon from '~/assets/icons/recieved-message-icon.svg'\r\nimport ViewedIcon from '~/assets/icons/viewed-message-icon.svg'\r\nimport DeleteIcon from 'assets/icons/delete-icon.svg'\r\n\r\ninterface PropsType {\r\n  isViewed: boolean\r\n  isReceived: boolean\r\n  isOwnMessage: boolean\r\n  date: string\r\n  audioMessage: unknown\r\n}\r\n\r\nconst props = defineProps<PropsType>()\r\nconst { isViewed, isReceived, isOwnMessage, date, audioMessage } = toRefs(props)\r\n\r\nconst emit = defineEmits<{(emit: 'deleteMessage'): void }>()\r\n\r\nconst isMessageReceived = computed<boolean>(() => {\r\n  return isReceived.value && !isViewed.value\r\n})\r\n\r\nconst isMessageViewed = computed<boolean>(() => isViewed.value)\r\n\r\nconst $visualizationContainer = ref(null)\r\nconst $audioElement = ref(null)\r\n\r\nconst audioDuration = ref(0)\r\n\r\nconst fileSizeInBytes = ref()\r\nconst fileSizeInKilobytes = computed(() => fileSizeInBytes.value / 1024)\r\n\r\nconst voiceMessageLengthTransformer = () => {\r\n  if (!audioDuration.value) {\r\n    return '00:00'\r\n  }\r\n\r\n  const oneMinuteInSeconds = 60\r\n\r\n  const messageDurationSeconds = currentCallNumber.value > 0\r\n    ? (currentCallNumber.value * speedToCallFunction).toFixed(0)\r\n    : audioDuration.value.toFixed(0)\r\n\r\n  const minutes = Math.floor(messageDurationSeconds / oneMinuteInSeconds)\r\n  const seconds = Math.floor(messageDurationSeconds % oneMinuteInSeconds)\r\n\r\n  let finalDuration = ''\r\n\r\n  function addTime (time: number, isSeconds: boolean = false) {\r\n    if (time < 10) {\r\n      finalDuration += '0' + time\r\n    } else {\r\n      finalDuration += time\r\n    }\r\n\r\n    !isSeconds && (finalDuration += ':')\r\n  }\r\n\r\n  addTime(minutes)\r\n  addTime(seconds, true)\r\n\r\n  return finalDuration\r\n}\r\n\r\nconst voiceMessageLength = ref()\r\n\r\nlet audioData\r\n\r\nfunction visualizeAudioData () {\r\n  const visualizationDiv = $visualizationContainer.value\r\n  visualizationDiv.innerHTML = ''\r\n\r\n  const barWidth = 3\r\n  const barSpacing = 1\r\n\r\n  const maxBarHeight = 19\r\n\r\n  for (let i = 0; i < numBars; i++) {\r\n    const startIndex = Math.floor((i / numBars) * audioData.length)\r\n    const endIndex = Math.floor(((i + 1) / numBars) * audioData.length)\r\n\r\n    let sum = 0\r\n    for (let j = startIndex; j < endIndex; j++) {\r\n      sum += Math.abs(audioData[j])\r\n    }\r\n\r\n    const average = sum / (endIndex - startIndex)\r\n    let barHeight = average * 10 * 20\r\n\r\n    if (average >= 0 && average < 0.01) {\r\n      barHeight = 2 // Установка высоты столбика в 2 пикселя, если значение равно 0\r\n    }\r\n\r\n    if (barHeight > 19) {\r\n      barHeight = maxBarHeight\r\n    }\r\n\r\n    const bar = document.createElement('div')\r\n    bar.style.width = barWidth + 'px'\r\n    bar.style.height = barHeight + 'px'\r\n    bar.style.backgroundColor = '#8babd8'\r\n    bar.style.borderRadius = '10px'\r\n    bar.style.marginRight = barSpacing + 'px'\r\n\r\n    visualizationDiv.appendChild(bar)\r\n  }\r\n}\r\n\r\nconst numBars = 64\r\nconst currentCallNumber = ref(0)\r\nlet speedToCallFunction\r\nlet visualizationTimeoutId // Переменная для хранения идентификатора таймера\r\nlet isVoiceMessageShouldBeRestarted = true\r\n\r\nwatch(\r\n  () => currentCallNumber.value,\r\n  () => {\r\n    voiceMessageLength.value = voiceMessageLengthTransformer()\r\n  }\r\n)\r\n\r\nfunction updateVisualizationColors () {\r\n  const visualizationDiv = $visualizationContainer.value\r\n  const bars = visualizationDiv.querySelectorAll('div')\r\n\r\n  bars.forEach((bar, index) => {\r\n    if (index <= currentCallNumber.value) {\r\n      // Закрашиваем столбики, которые уже завершены\r\n      bar.style.backgroundColor = '#1152a1'\r\n    } else {\r\n      // Оставляем незавершенные столбики без цвета\r\n      bar.style.backgroundColor = '#8babd8'\r\n    }\r\n  })\r\n\r\n  if (currentCallNumber.value < numBars) {\r\n    isVoiceMessageShouldBeRestarted = false\r\n    currentCallNumber.value += 1\r\n    visualizationTimeoutId = setTimeout(() => updateVisualizationColors(), speedToCallFunction * 1000)\r\n  } else {\r\n    isVoiceMessageActive.value = false\r\n    isVoiceMessageShouldBeRestarted = true\r\n  }\r\n}\r\n\r\nconst isVoiceMessageActive = ref(false)\r\nconst toggleVoiceMessageActive = () => {\r\n  isVoiceMessageActive.value = !isVoiceMessageActive.value\r\n}\r\n\r\n// Запуск обновления заливки фона столбиков\r\nconst onClickStartVoiceMessage = () => {\r\n  if (isVoiceMessageActive.value) {\r\n    isVoiceMessageShouldBeRestarted = false\r\n    pauseVoiceMessage()\r\n  } else {\r\n    if (isVoiceMessageShouldBeRestarted) {\r\n      currentCallNumber.value = 0\r\n    }\r\n    startVoiceMessage()\r\n  }\r\n}\r\n\r\nconst startVoiceMessage = () => {\r\n  $audioElement.value.play()\r\n  toggleVoiceMessageActive()\r\n  updateVisualizationColors()\r\n}\r\n\r\nconst pauseVoiceMessage = () => {\r\n  $audioElement.value.pause()\r\n  toggleVoiceMessageActive()\r\n  clearTimeout(visualizationTimeoutId)\r\n}\r\n\r\nconst deleteMessage = () => emit('deleteMessage')\r\n\r\nonMounted(() => {\r\n  fetch(audioMessage.value)\r\n    .then(response => response.blob())\r\n    .then((blob) => {\r\n      fileSizeInBytes.value = blob.size\r\n\r\n      const reader = new FileReader()\r\n      reader.onloadend = () => {\r\n        const arrayBuffer = reader.result\r\n        const audioContext = new AudioContext()\r\n        audioContext.decodeAudioData(arrayBuffer, (audioBuffer) => {\r\n          audioData = audioBuffer.getChannelData(0)\r\n\r\n          audioDuration.value = audioBuffer.duration\r\n          speedToCallFunction = audioDuration.value / numBars\r\n\r\n          voiceMessageLength.value = voiceMessageLengthTransformer()\r\n\r\n          visualizeAudioData()\r\n        })\r\n      }\r\n      reader.readAsArrayBuffer(blob)\r\n    })\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"audio-msg\">\r\n    <div class=\"audio-msg__body\">\r\n      <div\r\n        class=\"audio-msg__btn\"\r\n        @click=\"onClickStartVoiceMessage\"\r\n      >\r\n        <div\r\n          v-if=\"!isVoiceMessageActive\"\r\n          class=\"audio-msg__triangle\"\r\n        />\r\n\r\n        <div\r\n          v-else\r\n          class=\"audio-msg__pause\"\r\n        />\r\n      </div>\r\n      <div class=\"audio-msg__data\">\r\n        <div\r\n          ref=\"$visualizationContainer\"\r\n          class=\"audio-msg__columns\"\r\n        />\r\n\r\n        <div class=\"audio-msg__info\">\r\n          <div class=\"audio-msg__length\">\r\n            {{ voiceMessageLength }},\r\n          </div>\r\n          <div class=\"audio-msg__weight\">\r\n            {{ fileSizeInKilobytes.toFixed(2) }} KB\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <audio\r\n        ref=\"$audioElement\"\r\n        style=\"display: none\"\r\n        class=\"audioElement\"\r\n        :src=\"audioMessage\"\r\n      />\r\n    </div>\r\n    <div class=\"audio-msg__time-status\">\r\n      <div>{{ date?.slice(-5) }}</div>\r\n      <div v-if=\"isOwnMessage\">\r\n        <ReceivedIcon v-if=\"isMessageReceived\" />\r\n        <ViewedIcon v-if=\"isMessageViewed\" />\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      class=\"audio-msg__delete\"\r\n      @click=\"deleteMessage\"\r\n    >\r\n      <DeleteIcon class=\"audio-msg__delete-icon\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '~/assets/styles/_variables.scss' as variables;\r\n\r\n.audio-msg {\r\n  padding: 10px 15px;\r\n  background-color: #f7f8fa;\r\n  position: relative;\r\n}\r\n\r\n.audio-msg__body {\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.audio-msg__btn {\r\n  flex: 0 0 40px;\r\n  width: 40px;\r\n  height: 40px;\r\n  margin: 0 15px 0 0;\r\n  padding: 11.7px 10.1px 11.7px 13.8px;\r\n  background-color: #8babd8;\r\n  border-radius: 40px;\r\n  cursor: pointer;\r\n  transition: 0.2s all;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.audio-msg__btn:active {\r\n  opacity: 0.7;\r\n}\r\n\r\n.audio-msg__triangle {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-top: 9px solid transparent;\r\n  border-left: 16px solid variables.$color-white;\r\n  border-bottom: 9px solid transparent;\r\n  border-radius: 2px;\r\n}\r\n\r\n.audio-msg__pause {\r\n  position: relative;\r\n}\r\n\r\n.audio-msg__pause:before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -8px;\r\n  width: 4px;\r\n  height: 16px;\r\n  border-radius: 2px;\r\n  background-color: variables.$color-white;\r\n}\r\n\r\n.audio-msg__pause:after {\r\n  content: '';\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 4px;\r\n  width: 4px;\r\n  height: 16px;\r\n  border-radius: 2px;\r\n  background-color: variables.$color-white;\r\n}\r\n\r\n.audio-msg__time-status {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 5px;\r\n}\r\n\r\n.audioPlayer {\r\n\r\n}\r\n\r\n.audio-msg__columns {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 20px;\r\n  width: 220px;\r\n  margin-bottom: 9px;\r\n}\r\n\r\n.audio-msg__info {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.audio-msg__length,\r\n.audio-msg__weight {\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  color: #8babd8;\r\n}\r\n\r\n.audio-msg__delete {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 5px;\r\n  background-color: variables.$color-white;\r\n  box-shadow: 0 0 3px 0 variables.$color-black;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid variables.$color-light-grey;\r\n  cursor: pointer;\r\n  transition: 0.2s scale;\r\n}\r\n\r\n.audio-msg__delete-icon {\r\n  color: variables.$color-red;\r\n}\r\n\r\n.audio-msg__delete:hover {\r\n  scale: 1.1;\r\n}\r\n</style>\r\n"
        ]
      }
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709273111798,
      "end": 1709273111798,
      "order": "pre"
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709273111798,
      "end": 1709273111798,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709273111798,
      "end": 1709273111798,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709273111798,
      "end": 1709273111798,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1709273111798,
      "end": 1709273111798,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "result": ".audio-msg{background-color:#f7f8fa;padding:10px 15px;position:relative}.audio-msg__body{display:flex;gap:15px}.audio-msg__btn{align-items:center;background-color:#8babd8;border-radius:40px;cursor:pointer;display:flex;flex:0 0 40px;height:40px;justify-content:center;margin:0 15px 0 0;padding:11.7px 10.1px 11.7px 13.8px;transition:all .2s;width:40px}.audio-msg__btn:active{opacity:.7}.audio-msg__triangle{border-bottom:9px solid transparent;border-left:16px solid #fff;border-radius:2px;border-top:9px solid transparent;height:16px;width:16px}.audio-msg__pause{position:relative}.audio-msg__pause:after,.audio-msg__pause:before{background-color:#fff;border-radius:2px;content:\"\";height:16px;position:absolute;top:-8px;width:4px}.audio-msg__pause:after{right:4px}.audio-msg__time-status{display:flex;gap:5px;justify-content:flex-end}.audio-msg__columns{align-items:center;display:flex;height:20px;margin-bottom:9px;width:220px}.audio-msg__info{display:flex;gap:10px}.audio-msg__length,.audio-msg__weight{color:#8babd8;font-size:12px;font-weight:400}.audio-msg__delete{align-items:center;background-color:#fff;border:1px solid #eeeff1;border-radius:5px;box-shadow:0 0 3px 0 #000;cursor:pointer;display:flex;height:25px;justify-content:center;position:absolute;right:-5px;top:-5px;transition:scale .2s;width:25px}.audio-msg__delete-icon{color:#ad0b0a}.audio-msg__delete:hover{scale:1.1}",
      "start": 1709273111798,
      "end": 1709273112005,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "file": "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue",
        "mappings": "AAGA,WAEE,yBADA,kBAEA,kBAGF,iBACE,aACA,SAGF,gBAYE,mBANA,yBACA,mBACA,eAEA,aATA,cAEA,YAQA,uBAPA,kBACA,oCAIA,mBAPA,WAaF,uBACE,WAGF,qBAKE,oCADA,4BAEA,kBAHA,iCADA,YADA,WAQF,kBACE,kBAaF,iDAHE,qBC5CY,CD2CZ,kBALA,WAIA,YAHA,kBACA,SACA,UAMF,wBAIE,UAOF,wBACE,aAEA,QADA,yBAQF,oBAEE,mBADA,aAEA,YAEA,kBADA,YAIF,iBACE,aACA,SAGF,sCAIE,cAFA,eACA,gBAIF,mBAWE,mBAJA,qBC/FY,CDoGZ,yBANA,kBAEA,0BAKA,eAJA,aAJA,YAKA,uBATA,kBAEA,WADA,SAYA,qBAVA,WAaF,wBACE,cAGF,yBACE",
        "names": [],
        "sources": [
          "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue",
          "D:/Work/compas-chat/assets/styles/_variables.scss"
        ],
        "sourcesContent": [
          null,
          null
        ]
      }
    },
    {
      "name": "vite:esbuild",
      "start": 1709273112005,
      "end": 1709273112005,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1709273112005,
      "end": 1709273112005,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1709273112005,
      "end": 1709273112005,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": ".audio-msg[data-v-b064cf09]{background-color:#f7f8fa;padding:10px 15px;position:relative}.audio-msg__body[data-v-b064cf09]{display:flex;gap:15px}.audio-msg__btn[data-v-b064cf09]{align-items:center;background-color:#8babd8;border-radius:40px;cursor:pointer;display:flex;flex:0 0 40px;height:40px;justify-content:center;margin:0 15px 0 0;padding:11.7px 10.1px 11.7px 13.8px;transition:all .2s;width:40px}.audio-msg__btn[data-v-b064cf09]:active{opacity:.7}.audio-msg__triangle[data-v-b064cf09]{border-bottom:9px solid transparent;border-left:16px solid #fff;border-radius:2px;border-top:9px solid transparent;height:16px;width:16px}.audio-msg__pause[data-v-b064cf09]{position:relative}.audio-msg__pause[data-v-b064cf09]:after,.audio-msg__pause[data-v-b064cf09]:before{background-color:#fff;border-radius:2px;content:\"\";height:16px;position:absolute;top:-8px;width:4px}.audio-msg__pause[data-v-b064cf09]:after{right:4px}.audio-msg__time-status[data-v-b064cf09]{display:flex;gap:5px;justify-content:flex-end}.audio-msg__columns[data-v-b064cf09]{align-items:center;display:flex;height:20px;margin-bottom:9px;width:220px}.audio-msg__info[data-v-b064cf09]{display:flex;gap:10px}.audio-msg__length[data-v-b064cf09],.audio-msg__weight[data-v-b064cf09]{color:#8babd8;font-size:12px;font-weight:400}.audio-msg__delete[data-v-b064cf09]{align-items:center;background-color:#fff;border:1px solid #eeeff1;border-radius:5px;box-shadow:0 0 3px 0 #000;cursor:pointer;display:flex;height:25px;justify-content:center;position:absolute;right:-5px;top:-5px;transition:scale .2s;width:25px}.audio-msg__delete-icon[data-v-b064cf09]{color:#ad0b0a}.audio-msg__delete[data-v-b064cf09]:hover{scale:1.1}",
      "start": 1709273112005,
      "end": 1709273112009,
      "order": "normal",
      "sourcemaps": {
        "file": "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue",
        "mappings": "AAAA,4BAAW,wBAAwB,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,kCAAiB,YAAY,CAAC,QAAQ,CAAC,iCAAgB,kBAAkB,CAAC,wBAAwB,CAAC,kBAAkB,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,CAAC,WAAW,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,mCAAmC,CAAC,kBAAkB,CAAC,UAAU,CAAC,wCAAuB,UAAU,CAAC,sCAAqB,mCAAmC,CAAC,2BAA2B,CAAC,iBAAiB,CAAC,gCAAgC,CAAC,WAAW,CAAC,UAAU,CAAC,mCAAkB,iBAAiB,CAAC,mFAAiD,qBAAqB,CAAC,iBAAiB,CAAC,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,yCAAwB,SAAS,CAAC,yCAAwB,YAAY,CAAC,OAAO,CAAC,wBAAwB,CAAC,qCAAoB,kBAAkB,CAAC,YAAY,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,CAAC,kCAAiB,YAAY,CAAC,QAAQ,CAAC,wEAAsC,aAAa,CAAC,cAAc,CAAC,eAAe,CAAC,oCAAmB,kBAAkB,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,cAAc,CAAC,YAAY,CAAC,WAAW,CAAC,sBAAsB,CAAC,iBAAiB,CAAC,UAAU,CAAC,QAAQ,CAAC,oBAAoB,CAAC,UAAU,CAAC,yCAAwB,aAAa,CAAC,0CAAyB,SAAS",
        "names": [],
        "sources": [
          "D:/Work/compas-chat/components/chat/VoiceMessage/VoiceMessage.vue"
        ],
        "sourcesContent": [
          null
        ],
        "version": 3
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1709273112009,
      "end": 1709273112009,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273112009,
      "end": 1709273112009,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273112009,
      "end": 1709273112009,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709273112009,
      "end": 1709273112009,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709273112009,
      "end": 1709273112009,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1709273112009,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "result": "",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:build-html",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-template",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1709273112010,
      "end": 1709273112010,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1709273112010,
      "end": 1709273112011,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1709273112011,
      "end": 1709273112011,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1709273112011,
      "end": 1709273112011,
      "order": "normal"
    }
  ]
}
