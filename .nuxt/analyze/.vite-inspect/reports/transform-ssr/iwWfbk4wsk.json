{
  "resolvedId": "D:/Work/compas-chat/components/chat/ui/ChatInput.vue",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<script setup lang=\"ts\">\r\nimport AddDocuments from '~/assets/icons/add-doc-icon.svg'\r\nimport DeleteIcon from '~/assets/icons/delete-icon.svg'\r\nimport { docTypes, imagesTypes, inputFilesTypes } from '~/shared/const'\r\n\r\ninterface PropsType {\r\n  placeholder?: string\r\n  addDocuments?: boolean\r\n  inputValue: string | undefined\r\n  width?: string\r\n  isMakingAVoiceMessage?: boolean\r\n  messageDuration?: number\r\n}\r\n\r\nconst props = defineProps<PropsType>()\r\nconst { placeholder, addDocuments, inputValue, width, isMakingAVoiceMessage, messageDuration } = toRefs(props)\r\n\r\nconst emit = defineEmits<{\r\n  (emit: 'update:inputValue', inputValue: string): void\r\n}>()\r\n\r\nconst filesData = ref()\r\nconst isFilesTypesMenuOpen = ref<boolean>(false)\r\nconst activeFileType = ref()\r\n\r\nconst toggleFilesMenuType = () => isFilesTypesMenuOpen.value = !isFilesTypesMenuOpen.value\r\nconst setActiveFileType = async (fileType: typeof inputFilesTypes) => {\r\n  activeFileType.value = fileType\r\n  toggleFilesMenuType()\r\n  await nextTick()\r\n  $uploadDocuments.value.click()\r\n}\r\n\r\nconst setBorderRadiusForFirstAndLastItem = (itemIdx) => {\r\n  if (itemIdx == 0) {\r\n    return '5px 5px 0 0'\r\n  } else if (inputFilesTypes.length - 1 == itemIdx) {\r\n    return '0 0 5px 5px'\r\n  }\r\n}\r\n\r\nconst documentsType = computed(() => {\r\n  if (activeFileType.value == 'Фото') {\r\n    return imagesTypes.join(',')\r\n  }\r\n  if (activeFileType.value == 'Файл') {\r\n    return docTypes.join(',')\r\n  }\r\n})\r\n\r\nconst $uploadDocuments = ref<HTMLInputElement>()\r\nconst uploadedImages = ref([])\r\nconst uploadedDocuments = ref([])\r\n\r\nconst onChangeChooseFiles = (event: unknown) => {\r\n  const files = event.target.files\r\n\r\n  for (let i = 0; i < files.length; i++) {\r\n    const file = files[i]\r\n    const imageUrl = URL.createObjectURL(file)\r\n    const fileName = files[i].name\r\n\r\n    if (file.type.includes('image')) {\r\n      uploadedImages.value = [\r\n        ...uploadedImages.value,\r\n        {\r\n          id: i,\r\n          url: imageUrl\r\n        }]\r\n    } else {\r\n      uploadedDocuments.value = [\r\n        ...uploadedDocuments.value,\r\n        {\r\n          id: i,\r\n          url: imageUrl,\r\n          name: fileName\r\n        }]\r\n    }\r\n  }\r\n}\r\n\r\nconst deleteImage = (imgUrl: string) => {\r\n  uploadedImages.value = [...uploadedImages.value].filter(image => image.url !== imgUrl)\r\n}\r\n\r\nconst deleteDocument = (documentUrl: string) => {\r\n  uploadedDocuments.value = [...uploadedDocuments.value].filter(document => document.url !== documentUrl)\r\n}\r\n\r\nconst placeholderValue = computed(() => {\r\n  if (isMakingAVoiceMessage.value) {\r\n    return 'Для отмены кликните курсором вне поля'\r\n  } else {\r\n    return placeholder.value\r\n  }\r\n})\r\n\r\nconst voiceMessageLengthTransformer = computed(() => {\r\n  if (!messageDuration.value) {\r\n    return '00:00:00'\r\n  }\r\n\r\n  const oneMinuteInSeconds = 60\r\n  const oneHourInSeconds = 60 * 60\r\n\r\n  const messageDurationSeconds = messageDuration.value.toFixed(0)\r\n\r\n  const hours = Math.floor(messageDurationSeconds / oneHourInSeconds)\r\n  const minutes = Math.floor((messageDurationSeconds - hours * oneHourInSeconds) / oneMinuteInSeconds)\r\n  const seconds = Math.floor(messageDurationSeconds % oneMinuteInSeconds)\r\n\r\n  let finalDuration = ''\r\n\r\n  function addTime (time: number, isSeconds: boolean = false) {\r\n    if (time < 10) {\r\n      finalDuration += '0' + time\r\n    } else {\r\n      finalDuration += time\r\n    }\r\n\r\n    !isSeconds && (finalDuration += ':')\r\n  }\r\n\r\n  addTime(hours)\r\n  addTime(minutes)\r\n  addTime(seconds, true)\r\n\r\n  return finalDuration\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"custom-input\"\r\n    :style=\"{\r\n      width: width\r\n    }\"\r\n  >\r\n    <div\r\n      v-if=\"uploadedImages.length || uploadedDocuments.length\"\r\n      class=\"files\"\r\n    >\r\n      <div\r\n        v-if=\"uploadedImages.length\"\r\n        class=\"files__images\"\r\n      >\r\n        <div\r\n          v-for=\"image in uploadedImages\"\r\n          :key=\"image.id\"\r\n          class=\"files__image-wrapper\"\r\n        >\r\n          <div\r\n            class=\"files__delete\"\r\n            @click=\"deleteImage(image.url)\"\r\n          >\r\n            <DeleteIcon class=\"files__delete-icon\" />\r\n          </div>\r\n          <img\r\n            :src=\"image.url\"\r\n            class=\"files__image\"\r\n          >\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        v-if=\"uploadedDocuments.length\"\r\n        class=\"files__documents\"\r\n      >\r\n        <div\r\n          v-for=\"document in uploadedDocuments\"\r\n          :key=\"document.id\"\r\n          class=\"files__document-wrapper\"\r\n        >\r\n          <div\r\n            class=\"files__delete\"\r\n            @click=\"deleteDocument(document.url)\"\r\n          >\r\n            <DeleteIcon class=\"files__delete-icon\" />\r\n          </div>\r\n\r\n          <div class=\"files__document\">\r\n            {{ document.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      class=\"input\"\r\n      :style=\"{\r\n        width: width\r\n      }\"\r\n    >\r\n      <input\r\n        :value=\"inputValue\"\r\n        class=\"input__body\"\r\n        :class=\"{\r\n          'input__body_document': addDocuments && !isMakingAVoiceMessage,\r\n          'input__body_voice': isMakingAVoiceMessage\r\n        }\"\r\n        :placeholder=\"placeholderValue\"\r\n        :style=\"{\r\n          width: width,\r\n        }\"\r\n        @input=\"$emit('update:inputValue', $event.currentTarget.value)\"\r\n      >\r\n      <AddDocuments\r\n        v-if=\"addDocuments && !isMakingAVoiceMessage\"\r\n        class=\"input__add-doc-icon\"\r\n        :class=\"{\r\n          'input__add-doc-icon_active': isFilesTypesMenuOpen || filesData,\r\n        }\"\r\n        @click=\"toggleFilesMenuType\"\r\n      />\r\n\r\n      <div\r\n        v-if=\"isMakingAVoiceMessage\"\r\n        class=\"input__voice-msg-circle\"\r\n      />\r\n\r\n      <div\r\n        v-if=\"isMakingAVoiceMessage\"\r\n        class=\"input__voice-msg-length\"\r\n      >\r\n        {{ voiceMessageLengthTransformer }}\r\n      </div>\r\n\r\n      <input\r\n        ref=\"$uploadDocuments\"\r\n        class=\"input__documents\"\r\n        type=\"file\"\r\n        multiple\r\n        :accept=\"documentsType\"\r\n        @change=\"onChangeChooseFiles($event)\"\r\n      >\r\n\r\n      <div\r\n        v-if=\"isFilesTypesMenuOpen\"\r\n        class=\"doc__menu\"\r\n      >\r\n        <div\r\n          v-for=\"(fileType, idx) in inputFilesTypes\"\r\n          class=\"doc__item\"\r\n          :style=\"{\r\n            borderRadius: setBorderRadiusForFirstAndLastItem(idx)\r\n          }\"\r\n          @click=\"setActiveFileType(fileType)\"\r\n        >\r\n          {{ fileType }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '~/assets/styles/_variables.scss' as variables;\r\n\r\n.input {\r\n  position: relative;\r\n}\r\n\r\n.files {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.input__body {\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n\r\n  &::placeholder {\r\n    color: variables.$color-dark-grey;\r\n  }\r\n}\r\n\r\n.input__body_document {\r\n  padding-left: 48px;\r\n}\r\n\r\n.input__body_voice::placeholder {\r\n  text-align: center;\r\n}\r\n\r\n.input__add-doc-icon,\r\n.input__voice-msg-length,\r\n.input__voice-msg-circle {\r\n  position: absolute;\r\n  top: 14px;\r\n  left: 15px;\r\n  color: #A6B7D4;\r\n  cursor: pointer;\r\n}\r\n\r\n.input__voice-msg-length {\r\n  color: variables.$color-black;\r\n  left: 42px;\r\n  top: 12px;\r\n}\r\n\r\n.input__voice-msg-circle {\r\n  width: 12px;\r\n  height: 12px;\r\n  margin: 1px 15px 3px 0;\r\n  border-radius: 12px;\r\n  box-shadow: 0 0 5px 0 rgba(199, 73, 35, 0.5);\r\n  background-color: #c74923;\r\n}\r\n\r\n.input__add-doc-icon_active {\r\n  color: #1253a2;\r\n}\r\n\r\n.input__documents {\r\n  display: none;\r\n}\r\n\r\n.doc__menu {\r\n  position: absolute;\r\n  left: 15px;\r\n  top: -55px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 3px 0 variables.$color-black;\r\n  background-color: #fff;\r\n}\r\n\r\n.doc__item {\r\n  cursor: pointer;\r\n  width: 179px;\r\n  padding: 7px 10px;\r\n}\r\n\r\n.doc__item:hover,\r\n.doc__item_active {\r\n  background-color: variables.$color-light-grey;\r\n}\r\n\r\n.files__images {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.files__image-wrapper {\r\n  flex: 0 0 auto;\r\n  border: 1px solid variables.$color-light-grey;\r\n  border-radius: 5px;\r\n  position: relative;\r\n  padding: 4px;\r\n  background-color: variables.$color-white;\r\n}\r\n\r\n.files__delete {\r\n  position: absolute;\r\n  top: -10px;\r\n  right: -5px;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 5px;\r\n  background-color: variables.$color-white;\r\n  box-shadow: 0 0 3px 0 variables.$color-black;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: 1px solid variables.$color-light-grey;\r\n  cursor: pointer;\r\n  transition: 0.2s scale;\r\n}\r\n\r\n.files__delete-icon {\r\n  color: variables.$color-red;\r\n}\r\n\r\n.files__delete:hover {\r\n  scale: 1.1;\r\n}\r\n\r\n.files__image {\r\n  object-fit: contain;\r\n  width: 100%;\r\n  height: 150px;\r\n}\r\n\r\n.files__documents {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.files__document-wrapper {\r\n  min-height: 50px;\r\n  flex: 0 1 calc(33% - 10px);\r\n  border: 1px solid variables.$color-light-grey;\r\n  border-radius: 5px;\r\n  position: relative;\r\n  padding: 15px 10px 10px;\r\n  background-color: variables.$color-white;\r\n}\r\n</style>\r\n",
      "start": 1709273111331,
      "end": 1709273111422,
      "sourcemaps": null
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "pre"
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1709273111422,
      "end": 1709273111422,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"D:/Work/compas-chat/components/chat/ui/ChatInput.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"D:/Work/compas-chat/components/chat/ui/ChatInput.vue?vue&type=script&setup=true&lang.ts\";\nimport \"D:/Work/compas-chat/components/chat/ui/ChatInput.vue?vue&type=style&index=0&scoped=d7b5c2c8&lang.scss\";\nimport { useSSRContext as __vite_useSSRContext } from \"vue\";\nconst _sfc_setup = _sfc_main.setup;\n_sfc_main.setup = (props, ctx) => {\n  const ssrContext = __vite_useSSRContext();\n  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add(\"components/chat/ui/ChatInput.vue\");\n  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;\n};\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-d7b5c2c8\"]]);\n",
      "start": 1709273111422,
      "end": 1709273111487,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1709273111487,
      "end": 1709273111487,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273111487,
      "end": 1709273111487,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273111487,
      "end": 1709273111487,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709273111487,
      "end": 1709273111487,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1709273111487,
      "end": 1709273111487,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "post"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1709273111488,
      "end": 1709273111488,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709273111488,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1709273111488,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-template",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1709273111490,
      "end": 1709273111490,
      "order": "normal"
    }
  ]
}
