import{L as Ge,M as Ee,o as re,N as ke,O as e,K as Oe,H as ae,r as y,F as je,c as A,t as s,v as a,P as Ae,x as n,d as G,Q as K,R as ee,S as se,T as r,U as N,V as Z,W as w,y as k,z as W,_ as E,X as Ne,Y as R,B as Q,Z as Ze,C as $e,D as Ie,A as Se,$ as ce,a0 as qe}from"./entry.q2LX1tc-.js";function Pe(i){return Ge()?(Ee(i),!0):!1}function be(i){return typeof i=="function"?i():e(i)}const Qe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ke=Object.prototype.toString,Ye=i=>Ke.call(i)==="[object Object]",Xe=()=>{};function Je(i){return i||Oe()}function es(i,o=!0,t){Je()?re(i,t):o?i():ke(i)}function ss(i){var o;const t=be(i);return(o=t==null?void 0:t.$el)!=null?o:t}const xe=Qe?window:void 0;function he(...i){let o,t,l,d;if(typeof i[0]=="string"||Array.isArray(i[0])?([t,l,d]=i,o=xe):[o,t,l,d]=i,!o)return Xe;Array.isArray(t)||(t=[t]),Array.isArray(l)||(l=[l]);const h=[],p=()=>{h.forEach(g=>g()),h.length=0},_=(g,v,$,V)=>(g.addEventListener(v,$,V),()=>g.removeEventListener(v,$,V)),u=ae(()=>[ss(o),be(d)],([g,v])=>{if(p(),!g)return;const $=Ye(v)?{...v}:v;h.push(...t.flatMap(V=>l.map(B=>_(g,V,B,$))))},{immediate:!0,flush:"post"}),M=()=>{u(),p()};return Pe(M),M}function ts(){const i=y(!1);return Oe()&&re(()=>{i.value=!0}),i}function is(i){const o=ts();return A(()=>(o.value,!!i()))}function os(i,o={}){const{window:t=xe}=o,l=is(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let d;const h=y(!1),p=M=>{h.value=M.matches},_=()=>{d&&("removeEventListener"in d?d.removeEventListener("change",p):d.removeListener(p))},u=je(()=>{l.value&&(_(),d=t.matchMedia(be(i)),"addEventListener"in d?d.addEventListener("change",p):d.addListener(p),h.value=d.matches)});return Pe(()=>{u(),_(),d=void 0}),h}function as(i={}){const{window:o=xe,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:l=Number.POSITIVE_INFINITY,listenOrientation:d=!0,includeScrollbar:h=!0}=i,p=y(t),_=y(l),u=()=>{o&&(h?(p.value=o.innerWidth,_.value=o.innerHeight):(p.value=o.document.documentElement.clientWidth,_.value=o.document.documentElement.clientHeight))};if(u(),es(u),he("resize",u,{passive:!0}),d){const M=os("(orientation: portrait)");ae(M,()=>u())}return{width:p,height:_}}const ns={__name:"AppH1",setup(i){return(o,t)=>(s(),a("h1",null,[Ae(o.$slots,"default")]))}},ls=ns,cs={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},rs=n("path",{fill:"#1253A2","fill-rule":"evenodd",d:"M10 0a.91.91 0 0 1 .91.91l-.001 8.18h8.182a.91.91 0 0 1 0 1.82l-8.182-.001v8.182a.91.91 0 0 1-1.818 0l-.001-8.182H.91a.91.91 0 0 1 0-1.818l8.18-.001V.91A.91.91 0 0 1 10 0"},null,-1),ds=[rs];function us(i,o){return s(),a("svg",cs,[...ds])}const _s={render:us},hs={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"16"},ps=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"M17.648 4.033c0-.748-.072-1.223-.374-1.853a3.6 3.6 0 0 0-.554-.845l-.233-.25A3.7 3.7 0 0 0 15.36.328a4 4 0 0 0-.713-.236c-1.105-.235-2.162-.007-3 .55-.353.236-.363.297-.595.492-.275.232-1.05 1.034-1.387 1.376-.066.066-.122.103-.19.172-2.104 2.116-4.254 4.185-6.363 6.294-.366.366-.677.782-.806 1.301-.234.937-.052 1.824.565 2.558.194.23.46.461.731.598.751.38 1.442.477 2.257.208.704-.232 1.128-.735 1.63-1.237l5.25-5.25c.21-.21.384-.307.384-.669 0-.293-.294-.5-.57-.5-.292 0-.495.279-.652.436l-5.483 5.482c-.176.177-.368.396-.581.524a1.9 1.9 0 0 1-.586.225c-.623.13-1.35-.182-1.677-.728-.347-.581-.37-1.33.066-1.884.172-.22.418-.44.62-.64l3.26-3.216c.233-.194 1.081-1.073 1.333-1.326.059-.06.104-.086.164-.147l2.53-2.512c.325-.325.64-.625 1.069-.83a2.79 2.79 0 0 1 2.799.269c.102.076.279.215.357.316.198.253.213.197.419.565.319.57.434 1.307.277 1.976-.218.93-.822 1.393-1.467 2.038l-.518.518c-.066.066-.122.104-.19.173l-.7.699-.707.691c-.212.177-1.141 1.15-1.4 1.399l-.18.163c-.287.287-1.136 1.163-1.314 1.312-.22.184-.418.402-.62.605-.233.232-.65.681-.885.877-.443.37-.75.821-1.27 1.165a3.822 3.822 0 0 1-2.21.673A3.86 3.86 0 0 1 2.336 13.7c-.69-.69-1.144-1.634-1.144-2.638 0-.816.15-1.374.489-1.997.141-.26.324-.52.534-.727.054-.053.072-.086.12-.138.044-.047.084-.083.13-.13l5.569-5.568c.232-.232.41-.323.41-.695 0-.297-.291-.5-.57-.5-.291 0-.495.278-.652.435C5.274 3.69 3.337 5.65 1.377 7.586a4.8 4.8 0 0 0-.6.764l-.197.338C.24 9.256 0 10.175 0 10.837c0 .531.024.94.152 1.437.167.652.511 1.39.966 1.9l.371.406C2.246 15.337 3.5 16 4.99 16c1.158 0 2.295-.427 3.103-1.11.073-.062.144-.132.213-.185.222-.17.67-.68.971-.946.204-.179.387-.386.579-.578.254-.254.506-.527.768-.769.465-.43.907-.889 1.356-1.338.033-.033.06-.064.095-.094.05-.04.065-.048.112-.095.278-.282 1.044-1.079 1.346-1.331.068-.057.135-.133.2-.198.306-.307.935-.971 1.25-1.235.183-.153.883-.88 1.063-1.061.432-.432.741-.706 1.07-1.227.027-.044.042-.082.066-.124.267-.46.466-1.095.466-1.676"},null,-1),gs=[ps];function fs(i,o){return s(),a("svg",hs,[...gs])}const vs={render:fs},ms={xmlns:"http://www.w3.org/2000/svg",width:"17",height:"18"},ws=n("path",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M1 4.2h14.4m-12.8 0v11.2A1.6 1.6 0 0 0 4.2 17h8a1.6 1.6 0 0 0 1.6-1.6V4.2M5 4.2V2.6A1.6 1.6 0 0 1 6.6 1h3.2a1.6 1.6 0 0 1 1.6 1.6v1.6m-1.6 4V13M6.6 8.2V13",opacity:".466"},null,-1),Ms=[ws];function ys(i,o){return s(),a("svg",ms,[...Ms])}const _e={render:ys},Cs=["вс","пн","вт","ср","чт","пт","сб"],Ce=[{title:"Подробная информация",icon:"",action:"detailedChatInfo"},{title:"Редактировать",icon:"",action:"editChat"},{title:"Закрепить чат",alternativeTitle:"Открепить чат",icon:"pin-icon.svg",action:"pinChat"},{title:"Отключить уведомление",alternativeTitle:"Включить уведомление",icon:"mute-off-icon.svg",action:"muteChat"},{title:"Удалить чат",icon:"",action:"deleteChat"}],De=["Фото","Файл"],ks=["image/jpeg","image/png","image/bmp","image/svg+xml"],$s=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application / pdf","application / vnd.ms - excel"],ye=[{titleOne:"текстовое сообщение",titleTwo:"текстовых сообщений",titleThree:"текстовых сообщений",icon:"text-messages-icon",action:"text-messages"},{titleOne:"фотография",titleTwo:"фотографии",titleThree:"фотографий",icon:"images-messages-icon",action:"images-messages"},{titleOne:"видео",titleTwo:"видео",titleThree:"видео",icon:"video-messages-icon",action:"video-messages"},{titleOne:"файл",titleTwo:"файла",titleThree:"файлов",icon:"file-messages-icon",action:"file-messages"},{titleOne:"голосовое сообщение",titleTwo:"голосовых сообщений",titleThree:"голосовых сообщений",icon:"voice-messages-icon",action:"voice-messages"},{titleOne:"ссылка",titleTwo:"ссылки",titleThree:"ссылок",icon:"link-messages-icon",action:"link-messages"},{titleOne:"Удалить чат",titleTwo:"Удалить чат",titleThree:"Удалить чат",icon:"delete-icon",action:"delete-messages"}],Is={key:0,class:"files"},bs={key:0,class:"files__images"},xs=["onClick"],Ts=["src"],Vs={key:1,class:"files__documents"},Ds=["onClick"],Os={class:"files__document"},As=["value","placeholder"],Ns={key:1,class:"input__voice-msg-circle"},Ss={key:2,class:"input__voice-msg-length"},Ps=["accept"],Us={key:3,class:"doc__menu"},Ls=["onClick"],Bs=G({__name:"ChatInput",props:{placeholder:{},addDocuments:{type:Boolean},inputValue:{},width:{},isMakingAVoiceMessage:{type:Boolean},messageDuration:{}},emits:["update:inputValue"],setup(i,{emit:o}){const t=i,{placeholder:l,addDocuments:d,inputValue:h,width:p,isMakingAVoiceMessage:_,messageDuration:u}=K(t),M=y(),g=y(!1),v=y(),$=()=>g.value=!g.value,V=async x=>{v.value=x,$(),await ke(),I.value.click()},B=x=>{if(x==0)return"5px 5px 0 0";if(De.length-1==x)return"0 0 5px 5px"},L=A(()=>{if(v.value=="Фото")return ks.join(",");if(v.value=="Файл")return $s.join(",")}),I=y(),b=y([]),P=y([]),m=x=>{const S=x.target.files;for(let D=0;D<S.length;D++){const j=S[D],q=URL.createObjectURL(j),te=S[D].name;j.type.includes("image")?b.value=[...b.value,{id:D,url:q}]:P.value=[...P.value,{id:D,url:q,name:te}]}},f=x=>{b.value=[...b.value].filter(S=>S.url!==x)},c=x=>{P.value=[...P.value].filter(S=>S.url!==x)},C=A(()=>_.value?"Для отмены кликните курсором вне поля":l.value),U=A(()=>{if(!u.value)return"00:00:00";const x=60,S=60*60,D=u.value.toFixed(0),j=Math.floor(D/S),q=Math.floor((D-j*S)/x),te=Math.floor(D%x);let J="";function F(T,O=!1){T<10?J+="0"+T:J+=T,!O&&(J+=":")}return F(j),F(q),F(te,!0),J});return(x,S)=>(s(),a("div",{class:"custom-input",style:Z({width:e(p)})},[e(b).length||e(P).length?(s(),a("div",Is,[e(b).length?(s(),a("div",bs,[(s(!0),a(ee,null,se(e(b),D=>(s(),a("div",{key:D.id,class:"files__image-wrapper"},[n("div",{class:"files__delete",onClick:j=>f(D.url)},[W(e(_e),{class:"files__delete-icon"})],8,xs),n("img",{src:D.url,class:"files__image"},null,8,Ts)]))),128))])):r("",!0),e(P).length?(s(),a("div",Vs,[(s(!0),a(ee,null,se(e(P),D=>(s(),a("div",{key:D.id,class:"files__document-wrapper"},[n("div",{class:"files__delete",onClick:j=>c(D.url)},[W(e(_e),{class:"files__delete-icon"})],8,Ds),n("div",Os,k(D.name),1)]))),128))])):r("",!0)])):r("",!0),n("div",{class:"input",style:Z({width:e(p)})},[n("input",{value:e(h),class:N(["input__body",{input__body_document:e(d)&&!e(_),input__body_voice:e(_)}]),placeholder:e(C),style:Z({width:e(p)}),onInput:S[0]||(S[0]=D=>x.$emit("update:inputValue",D.currentTarget.value))},null,46,As),e(d)&&!e(_)?(s(),w(e(vs),{key:0,class:N(["input__add-doc-icon",{"input__add-doc-icon_active":e(g)||e(M)}]),onClick:$},null,8,["class"])):r("",!0),e(_)?(s(),a("div",Ns)):r("",!0),e(_)?(s(),a("div",Ss,k(e(U)),1)):r("",!0),n("input",{ref_key:"$uploadDocuments",ref:I,class:"input__documents",type:"file",multiple:"",accept:e(L),onChange:S[1]||(S[1]=D=>m(D))},null,40,Ps),e(g)?(s(),a("div",Us,[(s(!0),a(ee,null,se(e(De),(D,j)=>(s(),a("div",{class:"doc__item",style:Z({borderRadius:B(j)}),onClick:q=>V(D)},k(D),13,Ls))),256))])):r("",!0)],4)],4))}}),Te=E(Bs,[["__scopeId","data-v-d7b5c2c8"]]),Rs={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"8"},Fs=n("path",{fill:"#27AE60","fill-rule":"nonzero",d:"m7.264 5.178.967.94 5.8-5.634.969.94L8.231 8l-4.36-4.235.969-.941 1.456 1.414zm.001-1.882L10.658 0l.966.938L8.23 4.235zM5.328 7.06 4.36 8 0 3.765l.969-.941.968.94z"},null,-1),zs=[Fs];function Hs(i,o){return s(),a("svg",Rs,[...zs])}const pe={render:Hs},Ws={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"8"},Gs=n("path",{fill:"#27AE60","fill-rule":"nonzero",d:"m4.264 5.178.967.94 5.8-5.634.969.94L5.231 8 .871 3.765l.969-.941 1.456 1.414z"},null,-1),Es=[Gs];function js(i,o){return s(),a("svg",Ws,[...Es])}const ge={render:js},Zs={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15"},qs=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"m5.598 8.74.664.665c-.09.123-.29.298-.401.41l-.401.402-3.161 3.174c-.41.411-.408.378-.831.752L0 15c.069-.116.826-1.418.88-1.487.19-.238.338-.384.56-.605l.046-.047c.242-.242.983-.99 1.77-1.784l.366-.368 1.33-1.335.25-.25c.227-.224.373-.367.396-.384m-.156-3.365c.379.082.36.074.555.27l3.368 3.38c.08.082.148.113.188.248.108.36.173.737.152 1.121-.028.54-.214.918-.49 1.197-.11-.053-1.338-1.32-1.454-1.438L3.51 5.888c-.05-.051-.042-.035-.07-.093.28-.28.67-.468 1.216-.493.268-.012.537.02.785.073m4.878-3.142 2.442 2.456-3.195 3.895a10 10 0 0 1-.54-.517l-.433-.432-.237-.238-.302-.305C7.502 6.535 6.975 6 6.825 5.848c-.089-.09-.33-.307-.388-.406.108-.06.865-.71.982-.806.552-.455 1.39-1.188 1.929-1.606.148-.115.885-.759.972-.797M10.68 0 15 4.334c-.034.026-.038.045-.08.08-.032.03-.063.048-.108.077a1.1 1.1 0 0 1-.227.118c-.175.067-.379.1-.582.1-.167 0-.333-.02-.49-.052-.246-.052-.233-.05-.366-.187l-1.649-1.656c-.146-.147-1.05-1.026-1.09-1.113-.199-.426-.127-1.502.272-1.701"},null,-1),Qs=[qs];function Ks(i,o){return s(),a("svg",Zs,[...Qs])}const fe={render:Ks},Ys={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"12"},Xs=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8 .544c0-.455-.498-.708-.834-.424l-3.47 2.939a.5.5 0 0 1-.32.119H.512C.23 3.178 0 3.42 0 3.72v4.558c0 .3.23.543.513.543h2.862c.117 0 .23.042.32.12l3.47 2.938c.337.284.834.031.834-.424zm9.32 2.058c.3.318.3.833 0 1.151L15.198 6l2.122 2.247c.3.318.3.833 0 1.151a.74.74 0 0 1-1.088 0L14.11 7.152l-2.123 2.246a.74.74 0 0 1-1.088 0 .85.85 0 0 1 0-1.151L13.021 6 10.9 3.753a.85.85 0 0 1 0-1.151.74.74 0 0 1 1.088 0l2.123 2.246 2.122-2.246a.74.74 0 0 1 1.088 0"},null,-1),Js=[Xs];function et(i,o){return s(),a("svg",Ys,[...Js])}const ve={render:et},Y=Ne("users",{state:()=>({userId:1,chats:[{id:1,userId:1,firstName:"Тимур",secondName:"Киселев",isPinned:!0,isActive:!0,isTyping:!1,photo:"/photo.png",isMutedOff:!1,position:"Менеджер по работе с клиентами",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет Привет ПриветПриветПривет ПриветПривет ПриветПриветПривет Привет Привет ПриветПривет Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:3,message:"Привет",userId:2,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:4,message:"Принимаете заказ?",userId:2,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:5,message:"Привет",userId:1,isReceived:!0,isViewed:!1,isUnread:!1,date:"14.02.2024 15:12"},{id:6,message:"Принимаете заказ?",userId:1,isReceived:!1,isViewed:!1,isUnread:!1,date:"14.02.2024 15:12"}]},{id:11,isGroupChat:!0,title:"Логистика",photo:"",isPinned:!0,isTyping:!1,isMutedOff:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,users:[{id:2,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:3,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:4,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:5,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:6,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:7,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:8,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:9,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:10,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:11,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:12,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:13,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:14,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:15,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:13,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"},{id:14,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:15,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"}],messages:[{id:1,userId:1,firstName:"Тимур",secondName:"Киселев",message:"Добрый день, коллеги",date:"14.02.2024 15:12"},{id:2,userId:2,firstName:"Илья",secondName:"Петров",message:"Добрый день",date:"14.02.2024 15:12"}]},{id:2,userId:2,firstName:"Илья",secondName:"Петров",isPinned:!0,isActive:!0,isTyping:!1,photo:void 0,isMutedOff:!0,position:"Менеджер по работе с клиентами",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!0,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!0,date:"14.02.2024 15:12"}]},{id:3,userId:3,firstName:"Вася",secondName:"Петров",isPinned:!1,isActive:!0,isTyping:!1,photo:void 0,isMutedOff:!1,position:"Менеджер по работе с клиентами",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"}]},{id:4,userId:4,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!1,isTyping:!1,photo:void 0,isMutedOff:!1,position:"",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"}]},{id:6,userId:6,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!1,isTyping:!1,photo:"/photo.png",isMutedOff:!1,position:"",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:6,isReceived:!0,isViewed:!0,isUnread:!0,date:"13.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:6,isReceived:!0,isViewed:!0,isUnread:!0,date:"13.02.2024 15:12"}]},{id:7,userId:7,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!0,isTyping:!0,photo:"/photo.png",isMutedOff:!0,position:"Менеджер по работе с клиентами",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[]},{id:12,isGroupChat:!0,title:"Праздники 🤩",photo:"",isPinned:!1,isTyping:!1,isMutedOff:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,users:[{id:2,firstName:"Илья",secondName:"Петров",isActive:!0,isTyping:!1,photo:"/photo.png",position:"Менеджер по работе с клиентами"},{id:3,firstName:"Вася",secondName:"Петров",isActive:!1,isTyping:!1,photo:"",position:"Менеджер"}],messages:[{id:1,userId:1,firstName:"Тимур",secondName:"Киселев",message:"Сдаем на праздник",date:"14.02.2024 15:12"},{id:2,userId:2,firstName:"Илья",secondName:"Петров",message:"Несу",date:"14.02.2024 15:12"}]},{id:8,userId:8,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!0,isTyping:!1,photo:void 0,isMutedOff:!1,position:"Менеджер",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[]},{id:9,userId:9,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!0,isTyping:!1,photo:void 0,isMutedOff:!1,position:"Менеджер",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!0,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!0,isViewed:!0,isUnread:!0,date:"14.02.2024 15:12"}]},{id:10,userId:10,firstName:"Тимур",secondName:"Киселев",isPinned:!1,isActive:!0,isTyping:!1,photo:void 0,isMutedOff:!1,position:"Менеджер",isGroupChat:!1,totalTextMessages:200,totalPhotoMessages:404,totalVideoMessages:23,totalFileMessages:19,totalVoiceMessages:5,totalLinksMessages:66,isMenuOpen:!1,isDetailedInfoOpen:!1,messages:[{id:1,message:"Привет",userId:1,isReceived:!0,isViewed:!0,isUnread:!1,date:"14.02.2024 15:12"},{id:2,message:"Принимаете заказ?",userId:1,isReceived:!1,isViewed:!1,isUnread:!0,date:"14.02.2024 15:12"}]}],filteredChats:[],openedChatId:4,chatIdForOpenModal:void 0}),getters:{chatsWithPinnedUsers:i=>i.chats.filter(o=>o.isPinned),chatsWithoutPinned:i=>i.chats.filter(o=>!o.isPinned),openedChatData:i=>i.chats.find(o=>o.id===i.openedChatId),openModalChatData:i=>i.chats.find(o=>o.id===i.chatIdForOpenModal)},actions:{async togglePinUser(i){try{this.chats=this.chats.map(o=>o.id==i?{...o,isPinned:!o.isPinned}:o)}catch(o){console.log(o)}},async toggleUserMuted(i){try{this.chats=this.chats.map(o=>o.id==i?{...o,isMutedOff:!o.isMutedOff}:o)}catch(o){console.log(o)}},async filterChats(i){try{console.log(i)}catch(o){console.log(o)}},async deleteChat(i){try{this.chats=this.chats.filter(o=>o.id!==i),this.openedChatId=this.chats[0].id??void 0}catch(o){console.log(o)}}}}),X=Ne("settings",{state:()=>({isMobileSize:void 0,isChatsShown:!1,isLoading:!0}),getters:{},actions:{setIsMobileSize(i){this.isMobileSize=i}}}),st=G({__name:"ChatPhoto",props:{userId:{},isPinned:{type:Boolean},isActive:{type:Boolean},photo:{},chatName:{},isGroupChat:{type:Boolean},isDetailedMenu:{type:Boolean},isOpenDialogImage:{type:Boolean}},setup(i){const o=Y(),{openedChatId:t}=R(o),l=X(),{isMobileSize:d}=R(l),h=i,{userId:p,isPinned:_,isActive:u,photo:M,chatName:g,isGroupChat:v,isDetailedMenu:$,isOpenDialogImage:V}=K(h),B=A(()=>$.value?"#fff":p.value===t.value?"#eef3f9":_.value?"#eeeff1":"#fff"),L=A(()=>M.value?`url(${M.value})`:v.value?"linear-gradient(to bottom, #aeee90 2%, #65dd78 100%)":"linear-gradient(to bottom, #71d2fc 2%, #9490ff 100%)");return(I,b)=>(s(),a("div",{class:N(["user__photo",{group__photo:e(v),user__photo_big:e($),user__photo_mobile:e(d)&&e(V)}]),style:Z({backgroundImage:e(L)})},[e(M)?r("",!0):(s(),a("div",{key:0,class:N(["user__photo-name",{"user__photo-name_big":e($),"user__photo-name_mobile":e(d)&&e(V)}])},k(e(g)?e(g)[0]:""),3)),e(u)?(s(),a("div",{key:1,class:N(["user__active",{"user__active-big":e($),"user__active-mobile":e(d)&&e(V)}]),style:Z({backgroundColor:e(B)})},[n("div",{class:N(["user__active-circle",{"user__active-circle-big":e($),"user__active-circle-mobile":e(d)&&e(V)}])},null,2)],6)):r("",!0)],6))}}),me=E(st,[["__scopeId","data-v-3c3542ff"]]),Ue=i=>{if(i!=null&&i.id){const o=i.date.slice(0,10).split("."),t=new Date(o[2],o[1]-1,o[0]),l=new Date,d=l.getTime()-t.getTime(),h=24*60*60*1e3,p=Math.floor(d/h),_=Cs[t.getDay()];if(t.setHours(0,0,0,0)===l.setHours(0,0,0,0))return i.date.slice(-5);if(p<=7)return _;if(p>7)return i.date.slice(0,5)}return""};function Le(i){const o=i.getBoundingClientRect(),t=o.top,l=window.innerHeight-o.bottom;return{top:t,bottom:l}}const Be=i=>($e("data-v-52ab8990"),i=i(),Ie(),i),tt={class:"user__data"},it={class:"user__personal"},ot={class:"user__full-name"},at={class:"user__message-status"},nt={key:0,class:"user__last-message"},lt={key:0},ct=Be(()=>n("span",{class:"user__user-message-last"}," Вы: ",-1)),rt={key:1},dt={key:1,class:"user__is-typing"},ut=Be(()=>n("span",{class:"type__circles"},[n("span",{class:"type__circle"}),n("span",{class:"type__circle"}),n("span",{class:"type__circle"})],-1)),_t={class:"user__chat-info icon"},ht={key:1,class:"user__unread-msg"},pt=G({__name:"UserChat",props:{chatData:{}},setup(i){const o=i,{chatData:t}=K(o),l=Y(),{openedChatId:d,userId:h,chatsWithPinnedUsers:p,chatIdForOpenModal:_}=R(l),u=X();R(u);const M=y(!1),g=A(()=>t.value.firstName+" "+t.value.secondName),v=A(()=>t.value.messages.length?t.value.messages[t.value.messages.length-1]:{}),$=A(()=>t.value.messages.filter(c=>c.isUnread).length),V=A(()=>h.value===v.value.userId&&v.value.isReceived&&!v.value.isViewed),B=A(()=>h.value===v.value.userId&&v.value.isViewed),L=async()=>{await l.togglePinUser(t.value.id)},I=async()=>{await l.toggleUserMuted(t.value.id)},b=y({}),P=c=>{const C=[...document.querySelectorAll(".icon")],U=[...document.querySelectorAll(".menu")];console.log(M.value),!C.includes(c.target.closest(".icon"))&&!U.includes(c.target.closest(".menu"))&&(c.button===0?(u.$patch(x=>x.isChatsShown=!1),l.$patch(x=>x.openedChatId=t.value.id)):c.button===2&&(b.value=Le(c.target),M.value=!M.value))},m=A(()=>t.value.isPinned&&p.value[p.value.length-1].id===t.value.id?"0 0 9px 9px":t.value.isPinned&&p.value[0].id===t.value.id?"9px 9px 0 0":"0");he(document,"contextmenu",c=>{c.target.className.includes("user")&&c.preventDefault()});const f=y();return(c,C)=>{var U,x;return s(),a("div",{ref_key:"$menuItem",ref:f,class:N(["user",{user__chat_open:e(d)===e(t).id}]),style:Z({"border-bottom":e(t).isPinned?"none":"solid 1px #eeeff1",borderRadius:e(m)}),onMousedown:C[0]||(C[0]=Ze(S=>P(S),["prevent"]))},[W(me,{"is-active":e(t).isActive,"is-pinned":e(t).isPinned,"chat-name":e(t).firstName,photo:e(t).photo,"user-id":e(t).id,"is-group-chat":e(t).isGroupChat},null,8,["is-active","is-pinned","chat-name","photo","user-id","is-group-chat"]),n("div",tt,[n("div",it,[n("div",ot,k(e(g)),1),n("div",at,[e(B)?(s(),w(e(pe),{key:0})):r("",!0),e(V)?(s(),w(e(ge),{key:1})):r("",!0),Q(" "+k(e(Ue)(e(v))),1)])]),e(t).isTyping?r("",!0):(s(),a("div",nt,[(U=e(v))!=null&&U.id&&((x=e(v))==null?void 0:x.userId)===e(t).id?(s(),a("span",lt,[ct,Q(" "+k(e(v).message),1)])):(s(),a("span",rt,k(e(v).message??""),1))])),e(t).isTyping?(s(),a("div",dt,[Q(" печатает "),ut])):r("",!0),n("div",_t,[e(t).isMutedOff?(s(),w(e(ve),{key:0,class:"user__muted icon",onClick:I})):r("",!0),e($)?(s(),a("div",ht,k(e($)),1)):r("",!0),e(t).isPinned?(s(),w(e(fe),{key:2,class:"user__pinned icon",onClick:L})):r("",!0)])])],38)}}}),Re=E(pt,[["__scopeId","data-v-52ab8990"]]),gt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"16"},ft=n("path",{fill:"#A6B7D4","fill-rule":"nonzero",d:"M14.545 8c-.934 0-1.838-.417-2.545-1.175a4.54 4.54 0 0 1-1.182-2.772c-.079-1.12.262-2.148.961-2.898S13.455 0 14.545 0c1.084 0 2.063.412 2.76 1.16.703.755 1.045 1.783.966 2.892a4.55 4.55 0 0 1-1.182 2.773C16.384 7.583 15.48 8 14.545 8m0 1.454c1.676 0 3.228.41 4.487 1.185 1.414.87 2.364 2.15 2.745 3.706a1.38 1.38 0 0 1-.242 1.172 1.26 1.26 0 0 1-.997.483H8.554a1.26 1.26 0 0 1-1-.485 1.37 1.37 0 0 1-.24-1.172c.383-1.537 1.332-2.812 2.742-3.686 1.253-.775 2.847-1.203 4.49-1.203m-8.59-.429c1.147 0 2.184.196 2.984.586q.14.069.246.132a.364.364 0 0 1 .029.608c-1.335.954-2.238 2.262-2.623 3.81l-.019.086a.364.364 0 0 1-.358.298H1.17a1.15 1.15 0 0 1-.913-.443 1.25 1.25 0 0 1-.218-1.062c.315-1.265 1.095-2.313 2.255-3.032 1.022-.634 2.323-.983 3.662-.983m0-.843c-1.6 0-3.006-1.488-3.137-3.315-.064-.937.228-1.802.819-2.437.584-.63 1.409-.975 2.318-.975s1.727.348 2.315.98c.595.64.886 1.504.818 2.433-.13 1.827-1.536 3.314-3.133 3.314"},null,-1),vt=[ft];function mt(i,o){return s(),a("svg",gt,[...vt])}const Fe={render:mt},ze=i=>($e("data-v-9ec6cb8e"),i=i(),Ie(),i),wt={class:"group__data"},Mt={class:"group__info"},yt={class:"group__title"},Ct={class:"group__message-status"},kt={key:0,class:"group__last-message"},$t={key:0},It=ze(()=>n("span",{class:"group__user-message-last"}," Вы: ",-1)),bt={key:1},xt={class:"group__user-message-last"},Tt={key:1,class:"group__is-typing"},Vt=ze(()=>n("span",{class:"type__circles"},[n("span",{class:"type__circle"}),n("span",{class:"type__circle"}),n("span",{class:"type__circle"})],-1)),Dt={class:"group__chat-info icon"},Ot={key:1,class:"group__unread-msg"},At=G({__name:"GroupChat",props:{chatData:{}},setup(i){const o=i,{chatData:t}=K(o),l=Y(),{openedChatId:d,userId:h,chatsWithPinnedUsers:p,chatIdForOpenModal:_}=R(l),u=X();R(u);const M=y(!1),g=A(()=>t.value.messages.length?t.value.messages[t.value.messages.length-1]:{}),v=A(()=>t.value.messages.filter(f=>f.isUnread).length),$=A(()=>h.value===g.value.userId&&g.value.isReceived&&!g.value.isViewed),V=A(()=>h.value===g.value.userId&&g.value.isViewed),B=async()=>{await l.unpinUser(t.value.id)},L=async()=>{await l.toggleUserMuted(t.value.id)},I=y(),b=f=>{const c=[...document.querySelectorAll(".icon")],C=[...document.querySelectorAll(".menu")];!c.includes(f.target.closest(".icon"))&&!C.includes(f.target.closest(".menu"))&&(f.button===0?(u.$patch(U=>U.isChatsShown=!1),l.$patch(U=>U.openedChatId=t.value.id)):f.button===2&&(I.value=Le(f.target),M.value=!M.value))},P=A(()=>t.value.isPinned&&p.value[p.value.length-1].id===t.value.id?"0 0 9px 9px":t.value.isPinned&&p.value[0].id===t.value.id?"9px 9px 0 0":"0");he(document,"contextmenu",f=>{f.target.className.includes("group")&&f.preventDefault()});const m=y();return(f,c)=>{var C,U;return s(),a("div",{ref_key:"$menuItem",ref:m,class:N(["group",{group__chat_open:e(d)===e(t).id}]),style:Z({"border-bottom":e(t).isPinned?"none":"solid 1px #eeeff1",borderRadius:e(P)}),onMousedown:c[0]||(c[0]=x=>b(x))},[W(me,{"is-pinned":e(t).isPinned,"is-group-chat":e(t).isGroupChat,"chat-name":e(t).title,photo:e(t).photo,"user-id":e(t).id},null,8,["is-pinned","is-group-chat","chat-name","photo","user-id"]),n("div",wt,[n("div",Mt,[n("div",yt,[W(e(Fe),{class:"group__title-icon"}),n("div",null,k(e(t).title),1)]),n("div",Ct,[e(V)?(s(),w(e(pe),{key:0})):r("",!0),e($)?(s(),w(e(ge),{key:1})):r("",!0),Q(" "+k(e(Ue)(e(g))),1)])]),e(t).isTyping?r("",!0):(s(),a("div",kt,[(C=e(g))!=null&&C.id&&((U=e(g))==null?void 0:U.userId)===e(h)?(s(),a("span",$t,[It,Q(" "+k(e(g).message),1)])):(s(),a("span",bt,[n("span",xt,k(e(g).firstName+" "+e(g).secondName)+": ",1),Q(" "+k(e(g).message),1)]))])),e(t).isTyping?(s(),a("div",Tt,[Q(" печатает "),Vt])):r("",!0),n("div",Dt,[e(t).isMutedOff?(s(),w(e(ve),{key:0,class:"user__muted icon",onClick:L})):r("",!0),e(v)?(s(),a("div",Ot,k(e(v)),1)):r("",!0),e(t).isPinned?(s(),w(e(fe),{key:2,class:"group__pinned icon",onClick:B})):r("",!0)])])],38)}}}),He=E(At,[["__scopeId","data-v-9ec6cb8e"]]),Nt={class:"pinned"},St=G({__name:"ChatsWithPinnedUsers",props:{chatsWithPinnedUsers:{}},setup(i){const o=i,{chatsWithPinnedUsers:t}=K(o);return(l,d)=>(s(),a("div",Nt,[(s(!0),a(ee,null,se(e(t),h=>(s(),a("div",{key:h.id},[h.isGroupChat?r("",!0):(s(),w(Re,{key:0,"chat-data":h},null,8,["chat-data"])),h.isGroupChat?(s(),w(He,{key:1,"chat-data":h},null,8,["chat-data"])):r("",!0)]))),128))]))}}),Pt=E(St,[["__scopeId","data-v-feee7579"]]),Ut={class:"not-pinned"},Lt=G({__name:"ChatsWithoutPinnedUsers",props:{chatsWithoutPinnedUsers:{}},setup(i){const o=i,{chatsWithoutPinnedUsers:t}=K(o);return(l,d)=>(s(),a("div",Ut,[(s(!0),a(ee,null,se(e(t),h=>(s(),a("div",{key:h.id},[h.isGroupChat?r("",!0):(s(),w(Re,{key:0,"chat-data":h},null,8,["chat-data"])),h.isGroupChat?(s(),w(He,{key:1,"chat-data":h},null,8,["chat-data"])):r("",!0)]))),128))]))}}),Bt=E(Lt,[["__scopeId","data-v-0174e39c"]]),Rt={class:"users"},Ft={class:"users__wrapper"},zt={class:"users__head"},Ht=G({__name:"AllChats",setup(i){const o=Y(),{chatsWithPinnedUsers:t,chatsWithoutPinned:l}=R(o),d=y();return ae(()=>d.value,async()=>{await o.filterChats(d.value)}),(h,p)=>(s(),a("div",Rt,[n("div",Ft,[n("div",zt,[W(ls,{class:"users__title"},{default:Se(()=>[Q(" Чат ")]),_:1}),W(e(_s),{class:"users__add-chat"})]),W(Te,{inputValue:e(d),"onUpdate:inputValue":p[0]||(p[0]=_=>ce(d)?d.value=_:null),class:"users__input",placeholder:"Поиск"},null,8,["inputValue"]),e(t).length?(s(),w(Pt,{key:0,"chats-with-pinned-users":e(t),class:"users__pinned"},null,8,["chats-with-pinned-users"])):r("",!0),e(l).length?(s(),w(Bt,{key:1,"chats-without-pinned-users":e(l)},null,8,["chats-without-pinned-users"])):r("",!0)])]))}}),Wt=E(Ht,[["__scopeId","data-v-5078db99"]]),Gt={xmlns:"http://www.w3.org/2000/svg",width:"5",height:"20"},Et=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"M2.222 4.444c1.222 0 2.222-1 2.222-2.222S3.444 0 2.222 0 0 1 0 2.222s1 2.222 2.222 2.222m0 3.334C1 7.778 0 8.778 0 10s1 2.222 2.222 2.222 2.222-1 2.222-2.222-1-2.222-2.222-2.222m0 7.778C1 15.556 0 16.556 0 17.778S1 20 2.222 20s2.222-1 2.222-2.222-1-2.222-2.222-2.222"},null,-1),jt=[Et];function Zt(i,o){return s(),a("svg",Gt,[...jt])}const qt={render:Zt},Qt={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"},Kt=n("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",transform:"translate(1 1)"},[n("path",{d:"M13.334 13.333 20 20"}),n("circle",{cx:"7.778",cy:"7.778",r:"7.778"})],-1),Yt=[Kt];function Xt(i,o){return s(),a("svg",Qt,[...Yt])}const Jt={render:Xt},ei={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22"},si=n("path",{fill:"currentColor","fill-rule":"evenodd",stroke:"currentColor",d:"m19.04 14.639-2.827-.323a2.22 2.22 0 0 0-1.826.634L12.338 17a16.75 16.75 0 0 1-7.337-7.337l2.06-2.06a2.22 2.22 0 0 0 .634-1.826l-.323-2.805A2.23 2.23 0 0 0 5.157 1H3.23C1.973 1 .926 2.047 1.004 3.305c.59 9.508 8.194 17.1 17.691 17.69 1.258.079 2.305-.968 2.305-2.226v-1.926a2.207 2.207 0 0 0-1.96-2.204Z"},null,-1),ti=[si];function ii(i,o){return s(),a("svg",ei,[...ti])}const oi={render:ii},ai={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",fill:"#0584fe",viewBox:"0 0 512 512"},ni=n("path",{d:"M352 128.4 319.7 96 160 256l159.7 160 32.3-32.4L224.7 256z"},null,-1),li=[ni];function ci(i,o){return s(),a("svg",ai,[...li])}const We={render:ci},ri={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18"},di=n("path",{fill:"currentColor","fill-rule":"nonzero",d:"m9.752 9.182-6.95 1.159a.46.46 0 0 0-.357.293L.05 17.054a.692.692 0 0 0 .955.87l16.61-8.305a.693.693 0 0 0 0-1.238L1.005.075a.693.693 0 0 0-.955.87l2.397 6.42a.46.46 0 0 0 .357.295l6.95 1.158a.184.184 0 0 1 0 .364"},null,-1),ui=[di];function _i(i,o){return s(),a("svg",ri,[...ui])}const hi={render:_i},pi={xmlns:"http://www.w3.org/2000/svg",width:"12",height:"18"},gi=n("path",{fill:"#FFF","fill-rule":"evenodd",d:"M1.104 8.25c.746 0 .622.884.664 1.18.197 1.362 1.04 2.625 2.264 3.236.089.044.144.056.235.1a4 4 0 0 0 1.176.333c.439.062.704.06 1.142-.004.218-.033.313-.048.503-.102l.46-.144c.095-.035.118-.052.207-.094.275-.129.327-.139.611-.328l.66-.547a4.2 4.2 0 0 0 1.106-1.946c.17-.677.076-.697.14-1.102.134-.86 1.228-.695 1.228.022 0 1.164-.251 1.824-.682 2.671-.305.6-.676.99-1.137 1.446-.725.718-2.052 1.297-3.077 1.383v.424l.01 1.918a.614.614 0 1 1-1.228 0l.002-.257.007-1.665.001-.211v-.209a5.5 5.5 0 0 1-1.077-.23c-.963-.294-1.635-.795-2.335-1.49a4.8 4.8 0 0 1-.813-1.131c-.045-.087-.077-.119-.12-.215C.707 10.518.5 9.87.5 8.854a.6.6 0 0 1 .604-.604M6.14 0c.469.02.932.133 1.335.335.436.22.632.383.964.713.524.522.947 1.34.947 2.373v5.4c0 .57-.121.97-.287 1.389a3 3 0 0 1-.677 1c-1.238 1.235-3.082 1.384-4.435.36a3.6 3.6 0 0 1-.428-.377c-.502-.497-.947-1.381-.947-2.373v-5.4c0-1.373.756-2.502 1.934-3.096A3.2 3.2 0 0 1 5.84 0zm-.027 1.101h-.21c-.318.016-.63.104-.905.266-.823.488-1.351 1.415-1.351 2.544v4.436c0 .815.311 1.54.662 1.95.114.132.172.197.299.31.946.84 2.235.718 3.1-.297.19-.224.364-.5.473-.822.116-.343.2-.672.2-1.141V3.91c0-.848-.295-1.52-.661-1.95-.232-.27-.37-.404-.674-.585a2.04 2.04 0 0 0-.933-.275"},null,-1),fi=[gi];function vi(i,o){return s(),a("svg",pi,[...fi])}const mi={render:vi},wi={class:"owm-msg__message"},Mi={class:"own-msg__time-and-status"},yi={class:"own-msg__time"},Ci=G({__name:"OwnMessage",props:{message:{},lastOfSeveralMsgs:{type:Boolean}},setup(i){const o=X(),{isMobileSize:t}=R(o),l=i,{message:d,lastOfSeveralMsgs:h}=K(l),p=A(()=>d.value.isReceived&&!d.value.isViewed),_=A(()=>d.value.isViewed),u=()=>d.value.date.slice(-5);return(M,g)=>(s(),a("div",{class:N(["own-msg",{"own-msg__triangle ":e(h),"own-msg_mobile":e(t)}])},[n("div",wi,k(e(d).message),1),n("div",Mi,[n("div",yi,k(u()),1),e(_)?(s(),w(e(pe),{key:0})):r("",!0),e(p)?(s(),w(e(ge),{key:1})):r("",!0)])],2))}}),ki=E(Ci,[["__scopeId","data-v-476bbccb"]]),$i={key:0,class:"other-msg__first-name-letter"},Ii={class:"other-msg__message"},bi={class:"other-msg__time-and-status"},xi={class:"other-msg__time"},Ti=G({__name:"OtherMessage",props:{message:{},lastOfSeveralMsgs:{type:Boolean}},setup(i){const o=Y(),{chats:t}=R(o),l=X(),{isMobileSize:d}=R(l),h=i,{message:p,lastOfSeveralMsgs:_}=K(h),u=()=>p.value.date.slice(-5),M=A(()=>t.value.find(v=>v.userId===p.value.userId)),g=A(()=>_.value?M.value.photo?`url(${M.value.photo})`:"linear-gradient(to bottom, #71d2fc 2%, #9490ff 100%)":"none");return(v,$)=>(s(),a("div",{class:N(["other-msg",{"other-msg_mobile":e(d)}])},[n("div",{class:N(["other-msg__photo",{"other-msg__photo_mobile":e(d)}]),style:Z({backgroundImage:e(g)})},[e(M).photo?r("",!0):(s(),a("div",$i,k(e(M).firstName[0]),1))],6),n("div",{class:N(["other-msg__body",{"other-msg__triangle ":e(_)}])},[n("div",Ii,k(e(p).message),1),n("div",bi,[n("div",xi,k(u()),1)])],2)],2))}}),Vi=E(Ti,[["__scopeId","data-v-e3c96206"]]),Di={class:"audio-msg"},Oi={class:"audio-msg__body"},Ai={key:0,class:"audio-msg__triangle"},Ni={key:1,class:"audio-msg__pause"},Si={class:"audio-msg__data"},Pi={class:"audio-msg__info"},Ui={class:"audio-msg__length"},Li={class:"audio-msg__weight"},Bi=["src"],Ri={class:"audio-msg__time-status"},Fi={key:0},le=64,zi=G({__name:"VoiceMessage",props:{isViewed:{type:Boolean},isReceived:{type:Boolean},isOwnMessage:{type:Boolean},date:{},audioMessage:{}},emits:["deleteMessage"],setup(i,{emit:o}){const t=i,{isViewed:l,isReceived:d,isOwnMessage:h,date:p,audioMessage:_}=K(t),u=o,M=A(()=>d.value&&!l.value),g=A(()=>l.value),v=y(null),$=y(null),V=y(0),B=y(),L=A(()=>B.value/1024),I=()=>{if(!V.value)return"00:00";const F=60,T=f.value>0?(f.value*c).toFixed(0):V.value.toFixed(0),O=Math.floor(T/F),z=Math.floor(T%F);let H="";function ne(ie,de=!1){ie<10?H+="0"+ie:H+=ie,!de&&(H+=":")}return ne(O),ne(z,!0),H},b=y();let P;function m(){const F=v.value;F.innerHTML="";const T=3,O=1,z=19;for(let H=0;H<le;H++){const ne=Math.floor(H/le*P.length),ie=Math.floor((H+1)/le*P.length);let de=0;for(let Me=ne;Me<ie;Me++)de+=Math.abs(P[Me]);const we=de/(ie-ne);let ue=we*10*20;we>=0&&we<.01&&(ue=2),ue>19&&(ue=z);const oe=document.createElement("div");oe.style.width=T+"px",oe.style.height=ue+"px",oe.style.backgroundColor="#8babd8",oe.style.borderRadius="10px",oe.style.marginRight=O+"px",F.appendChild(oe)}}const f=y(0);let c,C,U=!0;ae(()=>f.value,()=>{b.value=I()});function x(){v.value.querySelectorAll("div").forEach((O,z)=>{z<=f.value?O.style.backgroundColor="#1152a1":O.style.backgroundColor="#8babd8"}),f.value<le?(U=!1,f.value+=1,C=setTimeout(()=>x(),c*1e3)):(S.value=!1,U=!0)}const S=y(!1),D=()=>{S.value=!S.value},j=()=>{S.value?(U=!1,te()):(U&&(f.value=0),q())},q=()=>{$.value.play(),D(),x()},te=()=>{$.value.pause(),D(),clearTimeout(C)},J=()=>u("deleteMessage");return re(()=>{fetch(_.value).then(F=>F.blob()).then(F=>{B.value=F.size;const T=new FileReader;T.onloadend=()=>{const O=T.result;new AudioContext().decodeAudioData(O,H=>{P=H.getChannelData(0),V.value=H.duration,c=V.value/le,b.value=I(),m()})},T.readAsArrayBuffer(F)})}),(F,T)=>{var O;return s(),a("div",Di,[n("div",Oi,[n("div",{class:"audio-msg__btn",onClick:j},[e(S)?(s(),a("div",Ni)):(s(),a("div",Ai))]),n("div",Si,[n("div",{ref_key:"$visualizationContainer",ref:v,class:"audio-msg__columns"},null,512),n("div",Pi,[n("div",Ui,k(e(b))+", ",1),n("div",Li,k(e(L).toFixed(2))+" KB ",1)])]),n("audio",{ref_key:"$audioElement",ref:$,style:{display:"none"},class:"audioElement",src:e(_)},null,8,Bi)]),n("div",Ri,[n("div",null,k((O=e(p))==null?void 0:O.slice(-5)),1),e(h)?(s(),a("div",Fi,[e(M)?(s(),w(e(ge),{key:0})):r("",!0),e(g)?(s(),w(e(pe),{key:1})):r("",!0)])):r("",!0)]),n("div",{class:"audio-msg__delete",onClick:J},[W(e(_e),{class:"audio-msg__delete-icon"})])])}}}),Hi=E(zi,[["__scopeId","data-v-b064cf09"]]),Wi=G({__name:"DialogBody",setup(i){const o=Y(),{openedChatData:t,userId:l,openedChatId:d}=R(o),h=X(),{isMobileSize:p}=R(h),_=y(),u=y("text"),M=()=>{clearTimeout(q),clearTimeout(q-1),!I.value&&(u.value==="text"?u.value="voice":u.value==="voice"&&(u.value="text"))},g=y(),v=y(),$=y(),V=y(!0),B=()=>{v.value.scrollTop=v.value.scrollHeight},L=async()=>{await ke();const T=g.value.offsetHeight,O=v.value.offsetHeight;V.value=T<O},I=y(!1),b=y([]);let P=!1;const m=async(T,O=!1)=>{O&&(P=!0),I.value=T,await D()};let f=[],c=null,C=null,U;const x=y(0);let S;async function D(){if(!navigator.mediaDevices&&!navigator.mediaDevices.getUserMedia)return console.warn("Not supported");if(c)c.stop(),clearInterval(S),x.value=0;else try{const T=await navigator.mediaDevices.getUserMedia({audio:!0});c=new MediaRecorder(T),c.start(),U=new Date().getTime(),c.ondataavailable=O=>{f.push(O.data)},S=setInterval(()=>x.value=(new Date().getTime()-U)/1e3,1e3),c.onstop=j}catch(T){console.error(T)}}function j(){C=new Blob(f,{type:"audio/mp3"});const T=URL.createObjectURL(C);P?b.value=[]:b.value=[T],c=null,f=[]}let q;const te=()=>{q=setTimeout(()=>{u.value==="text"||u.value==="voice"&&(I.value?m(!1):m(!0))},300)};re(async()=>{await L(),B()}),ae(()=>d.value,async()=>{await L(),B()});const J=T=>{const O=t.value.messages;return O[T+1]?O[T].userId!==O[T+1].userId:!0},F=T=>{b.value=b.value.splice(T,-1)};return(T,O)=>(s(),a("div",{class:N(["dialog",{dialog_mobile:e(p)}])},[n("div",{ref_key:"$dialogWrapper",ref:v,class:N(["dialog__wrapper",{dialog__wrapper_flex:e(V)}])},[n("div",{ref_key:"$dialogBody",ref:g,class:"dialog__body"},[(s(!0),a(ee,null,se(e(t).messages,(z,H)=>(s(),a("div",{key:z.id,class:"dialog__message",style:Z({alignSelf:z.userId==e(l)?"flex-end":"flex-start",marginBottom:e(t).messages.length-1===H&&"5px"})},[z.userId===e(l)?(s(),w(ki,{key:0,message:z,"last-of-several-msgs":J(H)},null,8,["message","last-of-several-msgs"])):(s(),w(Vi,{key:1,message:z,"last-of-several-msgs":J(H)},null,8,["message","last-of-several-msgs"]))],4))),128))],512)],2),e(b).length?(s(),w(Hi,{key:0,class:"dialog__voice","is-own-message":!0,date:"12:01:2024 14:15","is-received":!0,"is-viewed":!0,"audio-message":e(b)[0],onDeleteMessage:O[0]||(O[0]=z=>F(0))},null,8,["audio-message"])):r("",!0),n("div",{ref_key:"$dialogActions",ref:$,class:"dialog__actions"},[W(Te,{"input-value":e(_),"onUpdate:inputValue":O[1]||(O[1]=z=>ce(_)?_.value=z:null),class:"dialog__input",placeholder:"Напишите сообщение…","add-documents":!0,"is-making-a-voice-message":e(I),"message-duration":e(x)},null,8,["input-value","is-making-a-voice-message","message-duration"]),n("div",{class:N(["dialog__send-msg",{"dialog__send-msg_active":e(I)}]),onDblclick:M,onClick:te},[e(u)==="text"||e(I)?(s(),w(e(hi),{key:0})):r("",!0),e(u)==="voice"&&!e(I)?(s(),w(e(mi),{key:1})):r("",!0)],34)],512),e(I)?(s(),a("div",{key:1,class:"dialog__voice-bg",onClick:O[2]||(O[2]=z=>m(!1,!0))})):r("",!0)],2))}}),Gi=E(Wi,[["__scopeId","data-v-f0b4b62e"]]),Ei={class:"window__user-data"},ji={class:"user__user-data"},Zi={class:"user__name"},qi={key:1,class:"user__status"},Qi={key:0,class:"user__position"},Ki={key:1,class:"user__chat-users"},Yi=G({__name:"ChatWindowDialogData",setup(i){const o=Y(),{openedChatData:t}=R(o),l=X(),{isMobileSize:d}=R(l),h=A(()=>{var _,u,M;return t.value.isGroupChat?t.value.title:t.value.firstName?((_=t.value)==null?void 0:_.firstName)+" "+((u=t.value)==null?void 0:u.secondName):(M=t.value)==null?void 0:M.secondName}),p=A(()=>{var u;const _=(u=t.value.users)==null?void 0:u.length.toString();return _.slice(-1)===1?`${_} участник`:[2,3,4].includes(+_.slice(-1))?`${_} участника`:`${_} участников`});return(_,u)=>(s(),a("div",Ei,[W(me,{"is-pinned":e(t).isPinned,photo:e(t).photo,"is-active":e(t).isActive,"chat-name":e(h),"user-id":e(t).id,"is-group-chat":e(t).isGroupChat,"is-open-dialog-image":!0},null,8,["is-pinned","photo","is-active","chat-name","user-id","is-group-chat"]),n("div",ji,[n("div",{class:N(["user__name-status",{"user__name-status_mobile":e(d)}])},[e(t).isGroupChat?(s(),w(e(Fe),{key:0,class:"group__title-icon"})):r("",!0),n("div",Zi,k(e(h)),1),e(t).isGroupChat?r("",!0):(s(),a("div",qi,k(e(t).isActive?"В сети":"Не в сети"),1))],2),e(t).isGroupChat?r("",!0):(s(),a("div",Qi,k(e(t).position??""),1)),e(t).isGroupChat?(s(),a("div",Ki,k(e(p)),1)):r("",!0)])]))}}),Xi=E(Yi,[["__scopeId","data-v-20ceba7f"]]),Ji={__name:"AppH3",setup(i){return(o,t)=>(s(),a("h3",null,[Ae(o.$slots,"default")]))}},eo=Ji,so={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"18"},to=n("path",{fill:"none","fill-rule":"evenodd",stroke:"#A6B7D4","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8.2 1H2.6A1.6 1.6 0 0 0 1 2.6v12.8A1.6 1.6 0 0 0 2.6 17h9.6a1.6 1.6 0 0 0 1.6-1.6V6.6M8.2 1l5.6 5.6M8.2 1v5.6h5.6"},null,-1),io=[to];function oo(i,o){return s(),a("svg",so,[...io])}const ao={render:oo},no={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18"},lo=n("path",{fill:"none","fill-rule":"evenodd",stroke:"#A6B7D4","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7.391 9.805a4.02 4.02 0 0 0 4.627 1.361 4 4 0 0 0 1.44-.926l2.413-2.416A4.03 4.03 0 0 0 13.012 1a4.02 4.02 0 0 0-2.83 1.13L8.8 3.508m1.81 4.687a4.02 4.02 0 0 0-4.627-1.361 4 4 0 0 0-1.44.926L2.13 10.176A4.03 4.03 0 0 0 4.988 17a4.02 4.02 0 0 0 2.83-1.13l1.375-1.378"},null,-1),co=[lo];function ro(i,o){return s(),a("svg",no,[...co])}const uo={render:ro},_o={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18"},ho=n("path",{fill:"none","fill-rule":"evenodd",stroke:"#A6B7D4","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M2.778 17h12.444c.982 0 1.778-.796 1.778-1.778V2.778C17 1.796 16.204 1 15.222 1H2.778C1.796 1 1 1.796 1 2.778v12.444C1 16.204 1.796 17 2.778 17m0 0 9.778-9.778L17 11.667M7.222 5.889a1.333 1.333 0 1 1-2.666 0 1.333 1.333 0 0 1 2.666 0"},null,-1),po=[ho];function go(i,o){return s(),a("svg",_o,[...po])}const fo={render:go},vo={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"18"},mo=qe('<g fill="none" fill-rule="evenodd"><path fill="#D8D8D8" stroke="#979797" d="M10.073 1c5.01 0 9.073 3.4 9.073 7.595 0 4.194-4.062 7.594-9.073 7.594-1.444 0-2.808-.282-4.02-.784q-.957.544-1.575.784-.972.378-2.724.638.924-1.586 1.275-2.377.168-.38.295-.78C1.879 12.323 1 10.544 1 8.594 1 4.4 5.062 1 10.073 1Z"></path><path fill="#000" d="M4.826 4.362h10.435v1.16H4.826Zm0 2.32h10.435V7.84H4.826Zm0 2.26h10.435v1.16H4.826Zm0 2.377h6.32v1.16h-6.32Z"></path><path fill="#F7F8FA" stroke="#A6B7D4" stroke-width="1.3" d="M10.073 1c5.01 0 9.073 3.4 9.073 7.595 0 4.194-4.062 7.594-9.073 7.594-1.444 0-2.808-.282-4.02-.784q-.957.544-1.575.784-.972.378-2.724.638.924-1.586 1.275-2.377.168-.38.295-.78C1.879 12.323 1 10.544 1 8.594 1 4.4 5.062 1 10.073 1Z"></path><path fill="#A6B7D4" d="M4.826 5.058h10.435v.87H4.826Zm0 2.03h10.435v.869H4.826Zm0 2.028h10.435v.87H4.826Zm0 2.03h6.32v.869h-6.32Z"></path></g>',1),wo=[mo];function Mo(i,o){return s(),a("svg",vo,[...wo])}const yo={render:Mo},Co={xmlns:"http://www.w3.org/2000/svg",width:"21",height:"18"},ko=n("g",{fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[n("path",{stroke:"#ACC3E3",d:"m15.473 10.997 3.559 2.505a.688.688 0 0 0 .968-.629V4.58a.688.688 0 0 0-.968-.63l-3.559 2.506a.69.69 0 0 0-.292.562v3.417a.69.69 0 0 0 .292.562"}),n("path",{stroke:"#A6B7D4",d:"M12.223 16.42H3.958a2.89 2.89 0 0 1-2.09-.92A3.24 3.24 0 0 1 1 13.288V4.132c.002-.83.315-1.625.869-2.212A2.89 2.89 0 0 1 3.959 1h8.291a2.86 2.86 0 0 1 2.07.912c.55.581.859 1.37.861 2.191v9.185a3.24 3.24 0 0 1-.869 2.212 2.89 2.89 0 0 1-2.09.92"})],-1),$o=[ko];function Io(i,o){return s(),a("svg",Co,[...$o])}const bo={render:Io},xo={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18"},To=n("path",{fill:"none","fill-rule":"evenodd",stroke:"#A6B7D4","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6.333 13.238H2.778a1.778 1.778 0 0 0 0 3.556h1.778a1.78 1.78 0 0 0 1.777-1.778zm0 0V3.54c0-.559.404-1.036.955-1.127l8.381-1.397A1.143 1.143 0 0 1 17 2.143v9.318m0 0h-3.556a1.778 1.778 0 0 0 0 3.555h1.778A1.777 1.777 0 0 0 17 13.238z"},null,-1),Vo=[To];function Do(i,o){return s(),a("svg",xo,[...Vo])}const Oo={render:Do},Ao={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15"},No=n("path",{fill:"none","fill-rule":"evenodd",stroke:"#8F8F8F","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 13 13m0-13L1 14"},null,-1),So=[No];function Po(i,o){return s(),a("svg",Ao,[...So])}const Uo={render:Po},Lo={class:"add-info"},Bo={key:2,class:"menu__active"},Ro={key:3,class:"menu__name"},Fo={key:4,class:"menu__title"},zo={key:5,class:"menu__position"},Ho={key:6,class:"menu__participants"},Wo=["onClick"],Go=["onClick"],Eo=G({__name:"AdditionalInfoModal",props:{isDetailedModalOpen:{type:Boolean},isGroupChat:{type:Boolean}},emits:["update:isDetailedModalOpen"],setup(i,{emit:o}){const t=Y(),{openModalChatData:l}=R(t),d=X(),{isMobileSize:h}=R(d),p=i,{isDetailedModalOpen:_,isGroupChat:u}=K(p),M=o,g=A(()=>{var m,f,c,C;return u.value?(m=l.value)==null?void 0:m.title:l.value.firstName?((f=l.value)==null?void 0:f.firstName)+" "+((c=l.value)==null?void 0:c.secondName):(C=l.value)==null?void 0:C.secondName}),v=A(()=>Ce.filter(m=>m.action==="pinChat"||m.action==="muteChat")),$=async m=>{switch(m.action){case"muteChat":{await t.toggleUserMuted(l.value.id);break}case"pinChat":{await t.togglePinUser(l.value.id);break}}},V=m=>m.title,B=m=>{switch(m.action){case"text-messages":return f(l.value.totalTextMessages);case"images-messages":return f(l.value.totalPhotoMessages);case"video-messages":return f(l.value.totalVideoMessages);case"file-messages":return f(l.value.totalFileMessages);case"voice-messages":return f(l.value.totalVoiceMessages);case"link-messages":return f(l.value.totalLinksMessages);case"delete-messages":return m.titleOne}function f(c){const C=c.toString().slice(-1);return+C==1?c+" "+m.titleOne:+C>=2&&+C<=4?c+" "+m.titleTwo:c+" "+m.titleThree}},L=()=>{M("update:isDetailedModalOpen",!_.value),t.$patch(m=>m.chatIdForOpenModal=-1)},I=async m=>{switch(m.action){case"delete-messages":{await t.deleteChat(l.value.id),t.$patch(f=>f.chatIdForOpenModal=void 0);break}default:b.value=m.action}},b=y(),P=A(()=>{var c,C;if(!((c=l.value)!=null&&c.users))return;const m=(C=l.value)==null?void 0:C.users.length,f=toString().slice(-1);return+f==1?m+" участник":+f>=2&&+f<=4?m+" участника":m+" участников"});return(m,f)=>(s(),a("div",Lo,[n("div",{class:N(["add-info__modal",{"add-info__modal_mobile":e(h)}])},[e(h)?(s(),w(e(We),{key:0,class:"add-info__back-icon",onClick:L})):r("",!0),e(h)?r("",!0):(s(),w(e(Uo),{key:1,class:"add-info__close-icon",onClick:L})),W(eo,{class:N(["add-info__title",{"add-info__title_mobile":e(h)}])},{default:Se(()=>[Q(" Подробная информация ")]),_:1},8,["class"]),W(me,{class:"add-info__img","user-id":e(l).userId,"is-pinned":e(l).isPinned,"is-active":e(l).isActive,photo:e(l).photo,"chat-name":e(g),"is-group-chat":e(u),"is-detailed-menu":!0},null,8,["user-id","is-pinned","is-active","photo","chat-name","is-group-chat"]),e(u)?r("",!0):(s(),a("div",Bo,k(e(l).isActive?"В сети":"Не в сети"),1)),e(u)?r("",!0):(s(),a("div",Ro,k(e(g)),1)),e(u)?(s(),a("div",Fo,k(e(g)),1)):r("",!0),e(u)?r("",!0):(s(),a("div",zo,k(e(l).position??""),1)),e(u)?(s(),a("div",Ho,k(e(P)),1)):r("",!0),(s(!0),a(ee,null,se(e(v),(c,C)=>(s(),a("div",{key:c.title,class:N(["menu__item",{menu__item_last:C===e(v).length-1}]),onClick:U=>$(c)},[c.icon?(s(),a("div",{key:0,class:N(["menu__item-icon",{"menu__item-icon_not-selected":c.action=="muteChat"&&!e(l).isMutedOff||c.action=="pinChat"&&!e(l).isPinned}])},[c.action=="muteChat"&&e(l).isMutedOff?(s(),w(e(ve),{key:0,class:"menu__item-img"})):r("",!0),c.action=="pinChat"&&e(l).isPinned?(s(),w(e(fe),{key:1,class:"menu__item-img"})):r("",!0)],2)):r("",!0),Q(" "+k(V(c)),1)],10,Wo))),128)),(s(!0),a(ee,null,se(e(ye),(c,C)=>(s(),a("div",{key:c.action,class:N(["details-menu__item",{"details-menu__item_first":C===0,"details-menu__item_pre-last":C===e(ye).length-2,"details-menu__item_last":C===e(ye).length-1}]),onClick:U=>I(c)},[c.icon==="file-messages-icon"?(s(),w(e(ao),{key:0})):r("",!0),c.icon==="voice-messages-icon"?(s(),w(e(Oo),{key:1})):r("",!0),c.icon==="text-messages-icon"?(s(),w(e(yo),{key:2})):r("",!0),c.icon==="link-messages-icon"?(s(),w(e(uo),{key:3})):r("",!0),c.icon==="images-messages-icon"?(s(),w(e(fo),{key:4})):r("",!0),c.icon==="video-messages-icon"?(s(),w(e(bo),{key:5})):r("",!0),c.icon==="delete-icon"?(s(),w(e(_e),{key:6})):r("",!0),n("div",null,k(B(c)),1)],10,Go))),128))],2)]))}}),jo=E(Eo,[["__scopeId","data-v-bf34d35a"]]),Zo={class:"menu"},qo=["onClick"],Qo=G({__name:"ChatMenu",props:{isDetailedChatOpen:{type:Boolean},chatId:{},isPinned:{type:Boolean},isMutedOff:{type:Boolean},isUserChatLeft:{type:Boolean},isGroupChat:{type:Boolean}},emits:["update:isDetailedChatOpen","closeChat"],setup(i,{emit:o}){const t=i,{isDetailedChatOpen:l,chatId:d,isPinned:h,isMutedOff:p,isUserChatLeft:_,isGroupChat:u}=K(t),M=X(),g=o,v=Y(),{chatIdForOpenModal:$}=R(v),V=y(),B=async m=>{switch(V.value=m.title,m.action){case"pinChat":{await v.togglePinUser(d.value),_.value&&!$.value&&g("update:isDetailedChatOpen",!l.value);break}case"detailedChatInfo":{v.$patch(f=>f.chatIdForOpenModal=d),b();break}case"editChat":{console.log("edit chat"),_.value&&!$.value&&g("update:isDetailedChatOpen",!l.value);break}case"deleteChat":{await v.deleteChat(d.value),M.$patch(f=>f.isChatsShown=!0),g("closeChat"),_.value&&g("update:isDetailedChatOpen",!l.value);break}case"muteChat":{await v.toggleUserMuted(d.value),_.value&&!$.value&&g("update:isDetailedChatOpen",!l.value);break}}},L=m=>m.title;he(document,"contextmenu",m=>{m.preventDefault()});const I=y(!1),b=()=>I.value=!I.value,P=A(()=>u.value?Ce:Ce.filter(m=>m.action!=="editChat"));return(m,f)=>(s(),a("div",Zo,[(s(!0),a(ee,null,se(e(P),c=>(s(),a("div",{key:c.title,class:N(["menu__item",{menu__item_active:c.title===e(V)}]),onClick:C=>B(c)},[c.icon?(s(),a("div",{key:0,class:N(["menu__item-icon",{"menu__item-icon_not-selected":c.action=="muteChat"&&!e(p)||c.action=="pinChat"&&!e(h)}])},[c.action=="muteChat"&&e(p)?(s(),w(e(ve),{key:0,class:"menu__item-img"})):r("",!0),c.action=="pinChat"&&e(h)?(s(),w(e(fe),{key:1,class:"menu__item-img"})):r("",!0)],2)):r("",!0),Q(" "+k(L(c)),1)],10,qo))),128)),e(I)?(s(),w(jo,{key:0,"is-detailed-modal-open":e(I),"onUpdate:isDetailedModalOpen":f[0]||(f[0]=c=>ce(I)?I.value=c:null),"is-group-chat":e(u)},null,8,["is-detailed-modal-open","is-group-chat"])):r("",!0)]))}}),Ko=E(Qo,[["__scopeId","data-v-b79ed9ff"]]),Yo={class:"window"},Xo={class:"window__user-data"},Jo={class:"window__body"},ea=G({__name:"ChatWindow",setup(i){const o=Y(),{openedChatId:t,openedChatData:l}=R(o),d=X(),{isMobileSize:h}=R(d),p=y(!1),_=y(!1),u=y(!1),M=y(!1),g=y(),v=()=>{p.value=!p.value,_.value=!1,u.value=!1},$=()=>{_.value=!_.value,u.value=!1,p.value=!1},V=()=>{u.value=!u.value,p.value=!1,_.value=!1};ae(()=>t.value,()=>{_.value=!1});const B=()=>{d.$patch(L=>L.isChatsShown=!0),d.$patch(L=>L.chatIdForOpenModal=void 0)};return(L,I)=>(s(),a("div",Yo,[n("div",{ref:"$dialogHeadHeight",class:N(["window__top",{window__top_mobile:e(h)}])},[e(h)?(s(),w(e(We),{key:0,class:"window__back-icon",onClick:B})):r("",!0),n("div",Xo,[e(p)?r("",!0):(s(),w(Xi,{key:0})),e(p)?(s(),w(Te,{key:1,"input-value":e(g),"onUpdate:inputValue":I[0]||(I[0]=b=>ce(g)?g.value=b:null),placeholder:"Поиск по чату",width:"100%"},null,8,["input-value"])):r("",!0)]),n("div",{class:N(["window__actions",{window__actions_mobile:e(h)}])},[e(h)?r("",!0):(s(),w(e(Jt),{key:0,style:Z({color:e(p)?"#1253a2":"#8BABD8"}),class:"window__icon",onClick:v},null,8,["style"])),W(e(oi),{style:Z({color:e(u)?"#1253a2":"#8BABD8"}),class:"window__icon",onClick:V},null,8,["style"]),W(e(qt),{style:Z({color:e(_)?"#1253a2":"#8BABD8"}),class:"window__icon",onClick:$},null,8,["style"])],2),e(_)?(s(),w(Ko,{key:1,"is-detailed-chat-open":e(M),"onUpdate:isDetailedChatOpen":I[1]||(I[1]=b=>ce(M)?M.value=b:null),class:"window__menu","chat-id":e(t),"is-pinned":e(l).isPinned,"is-muted-off":e(l).isMutedOff,"is-group-chat":e(l).isGroupChat,onCloseChat:$},null,8,["is-detailed-chat-open","chat-id","is-pinned","is-muted-off","is-group-chat"])):r("",!0)],2),n("div",Jo,[W(Gi)])]))}}),sa=E(ea,[["__scopeId","data-v-ead358f6"]]),ta={},Ve=i=>($e("data-v-0874fe88"),i=i(),Ie(),i),ia={class:"loader"},oa=Ve(()=>n("span",null,null,-1)),aa=Ve(()=>n("span",null,null,-1)),na=Ve(()=>n("span",null,null,-1)),la=[oa,aa,na];function ca(i,o){return s(),a("div",ia,la)}const ra=E(ta,[["render",ca],["__scopeId","data-v-0874fe88"]]),da={class:"app"},ua={key:1,class:"chat"},ha=G({__name:"index",setup(i){const o=Y(),t=X(),{isMobileSize:l,isChatsShown:d,isLoading:h}=R(t),{width:p}=as();re(()=>{o.$patch(u=>u.filteredChats=u.chats),_(),window.addEventListener("resize",_),t.$patch(u=>u.isLoading=!1)});const _=()=>{t.$patch(u=>u.isMobileSize=window.innerWidth<950)};return(u,M)=>(s(),a("div",da,[e(h)?(s(),w(ra,{key:0})):(s(),a("div",ua,[e(p)<950&&e(d)||!e(l)?(s(),w(Wt,{key:0,class:N(["chat__users",{chat__users_mobile:e(l)}])},null,8,["class"])):r("",!0),e(l)&&!e(d)||!e(l)?(s(),w(sa,{key:1,class:N(["chat__window",{chat__window_mobile:e(l)}])},null,8,["class"])):r("",!0)]))]))}});export{ha as default};
